<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Build a System using .csv files · PowerSystems.jl</title><meta name="title" content="Build a System using .csv files · PowerSystems.jl"/><meta property="og:title" content="Build a System using .csv files · PowerSystems.jl"/><meta property="twitter:title" content="Build a System using .csv files · PowerSystems.jl"/><meta name="description" content="Documentation for PowerSystems.jl."/><meta property="og:description" content="Documentation for PowerSystems.jl."/><meta property="twitter:description" content="Documentation for PowerSystems.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="PowerSystems.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PowerSystems.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome Page</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/generated_creating_system/">Create and Explore a Power <code>System</code></a></li><li><a class="tocitem" href="../../tutorials/generated_manipulating_datasets/">Manipulating Data Sets</a></li><li><a class="tocitem" href="../../tutorials/generated_working_with_time_series/">Working with Time Series</a></li><li><a class="tocitem" href="../../tutorials/generated_add_dynamic_data/">Adding Data for Dynamic Simulations</a></li></ul></li><li><span class="tocitem">How to...</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox" checked/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">...import data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../parse_matpower_psse/">Parse a MATPOWER or PSS/e file</a></li><li><a class="tocitem" href="../parse_dynamic_data/">Parse PSS/e dynamic data</a></li><li class="is-active"><a class="tocitem" href>Build a <code>System</code> using .csv files</a><ul class="internal"><li><a class="tocitem" href="#Prerequisites"><span>Prerequisites</span></a></li><li><a class="tocitem" href="#Build-the-base-[System](@ref)"><span>Build the base <code>System</code></span></a></li><li><a class="tocitem" href="#Add-Buses-and-Network-Topology"><span>Add Buses and Network Topology</span></a></li><li><a class="tocitem" href="#Add-Branches"><span>Add Branches</span></a></li><li><a class="tocitem" href="#Adding-Thermal-Generators-and-their-Costs"><span>Adding Thermal Generators and their Costs</span></a></li><li><a class="tocitem" href="#Adding-Renewable-Generators-and-Their-Time-Series"><span>Adding Renewable Generators and Their Time Series</span></a></li><li><a class="tocitem" href="#Adding-Hydro-Generators-and-Their-Time-Series"><span>Adding Hydro Generators and Their Time Series</span></a></li><li><a class="tocitem" href="#Adding-Loads-and-Their-Time-Series"><span>Adding Loads and Their Time Series</span></a></li><li><a class="tocitem" href="#Customizing-and-Expanding"><span>Customizing and Expanding</span></a></li></ul></li><li><a class="tocitem" href="../serialize_data/">Save and read data with a JSON</a></li></ul></li><li><a class="tocitem" href="../add_component_natural_units/">...add a component using natural units (MW)</a></li><li><a class="tocitem" href="../use_context_managers/">...use context managers for bulk operations</a></li><li><a class="tocitem" href="../adding_additional_fields/">...add additional data to a component</a></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">...add time-series data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../parse_ts_from_csvs/">Parse time series data from .csv files</a></li><li><a class="tocitem" href="../improve_ts_performance/">Improve performance with time series data</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-6" type="checkbox"/><label class="tocitem" for="menuitem-3-6"><span class="docs-label">...add cost data</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../add_cost_curve/">Add an Operating Cost</a></li><li><a class="tocitem" href="../market_bid_cost/">Add a market bid</a></li><li><a class="tocitem" href="../create_system_with_source_import_export_cost/">Add costs for imported/exported power</a></li><li><a class="tocitem" href="../add_fuel_curve_timeseries/">Add time series fuel costs</a></li></ul></li><li><a class="tocitem" href="../add_new_types/">...customize or add a new Type</a></li><li><a class="tocitem" href="../create_hydro_datasets/">...define hydro generators with reservoirs</a></li><li><a class="tocitem" href="../handle_3W_transformers/">...handle 3-Winding Transformers</a></li><li><a class="tocitem" href="../jump/">...use PowerSystems.jl with JuMP.jl</a></li><li><a class="tocitem" href="../reduce_repl_printing/">...reduce REPL printing</a></li><li><input class="collapse-toggle" id="menuitem-3-12" type="checkbox"/><label class="tocitem" for="menuitem-3-12"><span class="docs-label">...update to a new <code>PowerSystems.jl</code> version</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../migrating_to_psy5/">Migrate from version 4.0 to 5.0</a></li></ul></li></ul></li><li><span class="tocitem">Explanation</span><ul><li><a class="tocitem" href="../../explanation/system/">System</a></li><li><a class="tocitem" href="../../explanation/type_structure/">Type Structure</a></li><li><a class="tocitem" href="../../explanation/buses_type_explanation/">Understanding ACBusTypes</a></li><li><a class="tocitem" href="../../explanation/per_unit/">Per-unit Conventions</a></li><li><a class="tocitem" href="../../explanation/power_concepts/">Power Concepts: Base Power, Rating, and Max Active Power</a></li><li><a class="tocitem" href="../../explanation/conforming_and_non_conforming_loads/">Conforming and Non-Conforming Loads</a></li><li><a class="tocitem" href="../../explanation/transformer_per_unit_models/">Transformer per unit transformations</a></li><li><a class="tocitem" href="../../explanation/time_series/">Time Series Data</a></li><li><a class="tocitem" href="../../explanation/dynamic_data/">Dynamic Devices</a></li><li><a class="tocitem" href="../../explanation/supplemental_attributes/">Supplemental Attributes</a></li><li><a class="tocitem" href="../../explanation/plant_attributes/">Plant Attributes</a></li></ul></li><li><span class="tocitem">Model Library</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">DynamicInverterComponent</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Converter/">Converter</a></li><li><a class="tocitem" href="../../model_library/generated_DCSource/">DCSource</a></li><li><a class="tocitem" href="../../model_library/generated_Filter/">Filter</a></li><li><a class="tocitem" href="../../model_library/generated_FrequencyEstimator/">FrequencyEstimator</a></li><li><a class="tocitem" href="../../model_library/generated_InnerControl/">InnerControl</a></li><li><a class="tocitem" href="../../model_library/generated_OutputCurrentLimiter/">OutputCurrentLimiter</a></li><li><a class="tocitem" href="../../model_library/outer_control/">OuterControl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">StaticInjection</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_FixedAdmittance/">FixedAdmittance</a></li><li><a class="tocitem" href="../../model_library/generated_InterruptiblePowerLoad/">InterruptiblePowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_InterruptibleStandardLoad/">InterruptibleStandardLoad</a></li><li><a class="tocitem" href="../../model_library/generated_ShiftablePowerLoad/">ShiftablePowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_ExponentialLoad/">ExponentialLoad</a></li><li><a class="tocitem" href="../../model_library/generated_MotorLoad/">MotorLoad</a></li><li><a class="tocitem" href="../../model_library/generated_PowerLoad/">PowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_StandardLoad/">StandardLoad</a></li><li><a class="tocitem" href="../../model_library/generated_SwitchedAdmittance/">SwitchedAdmittance</a></li><li><a class="tocitem" href="../../model_library/generated_FACTSControlDevice/">FACTSControlDevice</a></li><li><a class="tocitem" href="../../model_library/generated_HydroDispatch/">HydroDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_HydroPumpTurbine/">HydroPumpTurbine</a></li><li><a class="tocitem" href="../../model_library/generated_HydroTurbine/">HydroTurbine</a></li><li><a class="tocitem" href="../../model_library/generated_RenewableDispatch/">RenewableDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_RenewableNonDispatch/">RenewableNonDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_ThermalMultiStart/">ThermalMultiStart</a></li><li><a class="tocitem" href="../../model_library/generated_ThermalStandard/">ThermalStandard</a></li><li><a class="tocitem" href="../../model_library/generated_InterconnectingConverter/">InterconnectingConverter</a></li><li><a class="tocitem" href="../../model_library/generated_Source/">Source</a></li><li><a class="tocitem" href="../../model_library/generated_EnergyReservoirStorage/">EnergyReservoirStorage</a></li><li><a class="tocitem" href="../../model_library/generated_SynchronousCondenser/">SynchronousCondenser</a></li><li><a class="tocitem" href="../../model_library/hybrid_system/">HybridSystem</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Operating Costs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/thermal_generation_cost/">ThermalGenerationCost</a></li><li><a class="tocitem" href="../../model_library/hydro_generation_cost/">HydroGenerationCost</a></li><li><a class="tocitem" href="../../model_library/hydro_reservoir_cost/">HydroReservoirCost</a></li><li><a class="tocitem" href="../../model_library/renewable_generation_cost/">RenewableGenerationCost</a></li><li><a class="tocitem" href="../../model_library/storage_cost/">StorageCost</a></li><li><a class="tocitem" href="../../model_library/load_cost/">LoadCost</a></li><li><a class="tocitem" href="../../model_library/market_bid_cost/">MarketBidCost</a></li><li><a class="tocitem" href="../../model_library/import_export_cost/">ImportExportCost</a></li><li><a class="tocitem" href="../../model_library/offer_curve_cost/">OfferCurveCost</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-4" type="checkbox"/><label class="tocitem" for="menuitem-5-4"><span class="docs-label">Topology</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Area/">Area</a></li><li><a class="tocitem" href="../../model_library/generated_LoadZone/">LoadZone</a></li><li><a class="tocitem" href="../../model_library/generated_Arc/">Arc</a></li><li><a class="tocitem" href="../../model_library/generated_ACBus/">ACBus</a></li><li><a class="tocitem" href="../../model_library/generated_DCBus/">DCBus</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-5" type="checkbox"/><label class="tocitem" for="menuitem-5-5"><span class="docs-label">DynamicInjection</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_ActiveConstantPowerLoad/">ActiveConstantPowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_AggregateDistributedGenerationA/">AggregateDistributedGenerationA</a></li><li><a class="tocitem" href="../../model_library/generated_CSVGN1/">CSVGN1</a></li><li><a class="tocitem" href="../../model_library/generated_DynamicExponentialLoad/">DynamicExponentialLoad</a></li><li><a class="tocitem" href="../../model_library/generated_GenericDER/">GenericDER</a></li><li><a class="tocitem" href="../../model_library/generated_PeriodicVariableSource/">PeriodicVariableSource</a></li><li><a class="tocitem" href="../../model_library/generated_SimplifiedSingleCageInductionMachine/">SimplifiedSingleCageInductionMachine</a></li><li><a class="tocitem" href="../../model_library/generated_SingleCageInductionMachine/">SingleCageInductionMachine</a></li><li><a class="tocitem" href="../../model_library/dynamic_inverter/">Dynamic Inverter</a></li><li><a class="tocitem" href="../../model_library/dynamic_generator/">Dynamic Generator</a></li></ul></li><li><a class="tocitem" href="../../model_library/hydro_reservoir/">HydroReservoir</a></li><li><input class="collapse-toggle" id="menuitem-5-7" type="checkbox"/><label class="tocitem" for="menuitem-5-7"><span class="docs-label">Service</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_AGC/">AGC</a></li><li><a class="tocitem" href="../../model_library/generated_ConstantReserveNonSpinning/">ConstantReserveNonSpinning</a></li><li><a class="tocitem" href="../../model_library/generated_VariableReserveNonSpinning/">VariableReserveNonSpinning</a></li><li><a class="tocitem" href="../../model_library/generated_TransmissionInterface/">TransmissionInterface</a></li><li><a class="tocitem" href="../../model_library/reserves/">Reserves</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-8" type="checkbox"/><label class="tocitem" for="menuitem-5-8"><span class="docs-label">Branch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_DiscreteControlledACBranch/">DiscreteControlledACBranch</a></li><li><a class="tocitem" href="../../model_library/generated_Line/">Line</a></li><li><a class="tocitem" href="../../model_library/generated_MonitoredLine/">MonitoredLine</a></li><li><a class="tocitem" href="../../model_library/generated_PhaseShiftingTransformer3W/">PhaseShiftingTransformer3W</a></li><li><a class="tocitem" href="../../model_library/generated_Transformer3W/">Transformer3W</a></li><li><a class="tocitem" href="../../model_library/generated_PhaseShiftingTransformer/">PhaseShiftingTransformer</a></li><li><a class="tocitem" href="../../model_library/generated_TapTransformer/">TapTransformer</a></li><li><a class="tocitem" href="../../model_library/generated_Transformer2W/">Transformer2W</a></li><li><a class="tocitem" href="../../model_library/generated_TwoTerminalGenericHVDCLine/">TwoTerminalGenericHVDCLine</a></li><li><a class="tocitem" href="../../model_library/generated_TwoTerminalLCCLine/">TwoTerminalLCCLine</a></li><li><a class="tocitem" href="../../model_library/generated_TwoTerminalVSCLine/">TwoTerminalVSCLine</a></li><li><a class="tocitem" href="../../model_library/generated_AreaInterchange/">AreaInterchange</a></li><li><a class="tocitem" href="../../model_library/generated_TModelHVDCLine/">TModelHVDCLine</a></li><li><a class="tocitem" href="../../model_library/dynamic_branch/">Dynamic Lines</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-9" type="checkbox"/><label class="tocitem" for="menuitem-5-9"><span class="docs-label">DynamicGeneratorComponent</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_AVR/">AVR</a></li><li><a class="tocitem" href="../../model_library/generated_Machine/">Machine</a></li><li><a class="tocitem" href="../../model_library/generated_PSS/">PSS</a></li><li><a class="tocitem" href="../../model_library/generated_Shaft/">Shaft</a></li><li><a class="tocitem" href="../../model_library/generated_TurbineGov/">TurbineGov</a></li></ul></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../api/public/">Public API</a></li><li><a class="tocitem" href="../../api/glossary/">Glossary and Acronyms</a></li><li><a class="tocitem" href="../../api/type_tree/">Type Tree</a></li><li><a class="tocitem" href="../../api/valuecurve_options/"><code>ValueCurve</code> Options</a></li><li><a class="tocitem" href="../../api/enumerated_types/">Specifying the category of...</a></li><li><a class="tocitem" href="../../api/psse_models/">Supported PSS/e Models</a></li><li><a class="tocitem" href="../../api/static_injection_subtypes/">Comparison of Load, Generator, and Storage Types</a></li><li><a class="tocitem" href="../../api/citation/">Citation</a></li><li><input class="collapse-toggle" id="menuitem-6-9" type="checkbox"/><label class="tocitem" for="menuitem-6-9"><span class="docs-label">Developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/developer_guidelines/">Developer Guidelines</a></li><li><a class="tocitem" href="../../api/internal/">Internals</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to...</a></li><li><a class="is-disabled">...import data</a></li><li class="is-active"><a href>Build a <code>System</code> using .csv files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Build a <code>System</code> using .csv files</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerSystems.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerSystems.jl/blob/main/docs/src/how_to/build_system_with_files.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="system_from_csv"><a class="docs-heading-anchor" href="#system_from_csv">Building a System from CSV Files</a><a id="system_from_csv-1"></a><a class="docs-heading-anchor-permalink" href="#system_from_csv" title="Permalink"></a></h1><p>If you have input data on the component specifications and time series data formatted in CSV files, rather than a Matpower or PSS/e file that can be <a href="../parse_matpower_psse/#pm_data">parsed automatically</a>, the basic formula to build a <a href="../../api/public/#System"><code>System</code></a> manually is:</p><ol><li>Format all .csv data into row-column format, where there is a row for each component and a column for each input parameter. Load each .csv into a <code>DataFrame</code>.</li><li>Define a <a href="../../api/public/#System"><code>System</code></a>.</li><li>Starting with the buses, write a <code>for</code> loop for each component <code>Type</code> to loop over the <code>DataFrame</code>, using a constructor from <code>PowerSystems.jl</code>&#39;s Model Library to define a component for each row. Hard-code any required parameters that are missing in your dataset. Use <a href="../../api/public/#PowerSystems.add_component!-Tuple{System, DynamicInjection, StaticInjection}"><code>add_component!</code></a> to add each component to the <a href="../../api/public/#System"><code>System</code></a>.</li><li>Similarly, add cost and time series data either within each <code>for</code> loop, or after the components have been defined using <a href="../../api/public/#PowerSystems.begin_time_series_update-Tuple{Function, System}"><code>begin_time_series_update</code></a>.</li><li><a href="../serialize_data/#Write,-View,-and-Load-Data-with-a-JSON">Save your <code>System</code> to a JSON</a> once you are finished</li></ol><p>The following example demonstrates this process for selected component types (e.g., <a href="../../model_library/generated_ACBus/#ACBus"><code>ACBus</code></a>, <a href="../../model_library/generated_ThermalStandard/#ThermalStandard"><code>ThermalStandard</code></a>, <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a>), but the same principles apply to build any of the components in <code>PowerSystems.jl</code>&#39;s Model Library.</p><p>Feel free to reuse the code below, ensuring that you customize the exact file names, data columns, column names, and hard-coded parameters in the <code>for</code> loops based on the data you have available.</p><h2 id="Prerequisites"><a class="docs-heading-anchor" href="#Prerequisites">Prerequisites</a><a id="Prerequisites-1"></a><a class="docs-heading-anchor-permalink" href="#Prerequisites" title="Permalink"></a></h2><p>In this example, it is assumed that the CSV files are stored in a directory called <code>MyData</code>. In each section below, ensure your data follows the row-column format before beginning, and that your data are in the given units.</p><p>These are the depedencies needed for this how-to:</p><pre><code class="language-julia hljs">using PowerSystems
using CSV
using DataFrames
using Dates
using TimeSeries</code></pre><h2 id="Build-the-base-[System](@ref)"><a class="docs-heading-anchor" href="#Build-the-base-[System](@ref)">Build the base <a href="../../api/public/#System"><code>System</code></a></a><a id="Build-the-base-[System](@ref)-1"></a><a class="docs-heading-anchor-permalink" href="#Build-the-base-[System](@ref)" title="Permalink"></a></h2><pre><code class="language-julia hljs">system_base_power = 100.0
sys = System(system_base_power)</code></pre><p>Begin by building the base <a href="../../api/public/#System"><code>System</code></a> using the base power in MVA.</p><h2 id="Add-Buses-and-Network-Topology"><a class="docs-heading-anchor" href="#Add-Buses-and-Network-Topology">Add Buses and Network Topology</a><a id="Add-Buses-and-Network-Topology-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Buses-and-Network-Topology" title="Permalink"></a></h2><p>In this example, we assume that the component data for the buses are contained in a CSV file, <code>Buses.csv</code>. Each row is an individual bus, and there is a column for each input parameter:</p><table><tr><th style="text-align: left">Bus Number</th><th style="text-align: left">BusType</th><th style="text-align: left">Magnitude (p.u.)</th><th style="text-align: left">Voltage-Max (p.u.)</th><th style="text-align: left">Voltage-Min (p.u.)</th><th style="text-align: left">Base Voltage (kV)</th><th style="text-align: left">Region</th></tr><tr><td style="text-align: left">1</td><td style="text-align: left">ref</td><td style="text-align: left">1</td><td style="text-align: left">1.06</td><td style="text-align: left">0.94</td><td style="text-align: left">138</td><td style="text-align: left">R1</td></tr><tr><td style="text-align: left">2</td><td style="text-align: left">ref</td><td style="text-align: left">1</td><td style="text-align: left">1.06</td><td style="text-align: left">0.94</td><td style="text-align: left">345</td><td style="text-align: left">R2</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Read in the contents of the CSV file <code>Buses.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">bus_params = CSV.read(&quot;MyData/Buses.csv&quot;, DataFrame)

min_volt = &quot;Voltage-Min (p.u.)&quot;
max_volt = &quot;Voltage-Max (p.u.)&quot;
base_volt = &quot;Base Voltage (kV)&quot;
bus_number = &quot;Bus Number&quot;
region = &quot;Region&quot;</code></pre><p>In this example, we assume that the buses are sorted into <code>Areas</code>, where <a href="../../model_library/generated_Area/#Area"><code>Area</code></a> is an optional parameter in the <a href="../../model_library/generated_ACBus/#ACBus"><code>ACBus</code></a> constructor. Because we will be sorting our buses into these areas as we construct the buses, we must first attach the areas to our <a href="../../api/public/#System"><code>System</code></a>.</p><pre><code class="language-julia hljs">regions = unique(bus_params[:, region])

for reg in regions
    area = Area(reg)
    add_component!(sys, area)
end</code></pre><p>You could similarly add <a href="../../model_library/generated_LoadZone/#LoadZone"><code>LoadZone</code></a>s at this point, if they are relevant for your system.</p><p>Now, we are ready to build the buses in the <code>for</code> loop, using the <a href="../../model_library/generated_ACBus/#ACBus"><code>ACBus</code></a> constructor, using the input data available in our <code>Buses.csv</code>, and hard coding any missing data.</p><pre><code class="language-julia hljs">for row in eachrow(bus_params)
    bus = ACBus(;
        number = row[bus_number],
        name = &quot;bus$(row[bus_number])&quot;,
        available = true,
        bustype = ACBusTypes.PQ,
        angle = 0.0,
        magnitude = 1.0,
        voltage_limits = (min = row[min_volt], max = row[max_volt]),
        base_voltage = row[base_volt],
        area = get_component(Area, sys, row[region]),
    )
    add_component!(sys, bus)
end</code></pre><h2 id="Add-Branches"><a class="docs-heading-anchor" href="#Add-Branches">Add Branches</a><a id="Add-Branches-1"></a><a class="docs-heading-anchor-permalink" href="#Add-Branches" title="Permalink"></a></h2><p>The next step is to build the <a href="../../api/public/#PowerSystems.Branch"><code>Branch</code></a> components in the system. In this example, we only have two branch types: a <a href="../../model_library/generated_Line/#Line"><code>Line</code></a>, if the connecting buses have the same base voltage; and a <a href="../../model_library/generated_Transformer2W/#Transformer2W"><code>Transformer2W</code></a> if they have different base voltages. You may need to implement additional logic if you have other branch types as well.</p><p>We assume the data for each <a href="../../api/public/#PowerSystems.Branch"><code>Branch</code></a> is contained in a <code>Branches.csv</code>. The conventions used in <code>Bus from</code> and <code>Bus to</code> must be consistent with the conventions used in the <code>Bus Number</code> column of <code>Buses.csv</code>.</p><table><tr><th style="text-align: left">Branch Number</th><th style="text-align: left">Bus from</th><th style="text-align: left">Bus to</th><th style="text-align: left">Reactance (p.u.)</th><th style="text-align: left">Resistance (p.u.)</th><th style="text-align: left">Max Flow (MW)</th><th style="text-align: left">Min Flow (MW)</th></tr><tr><td style="text-align: left">1</td><td style="text-align: left">1</td><td style="text-align: left">2</td><td style="text-align: left">0.0999</td><td style="text-align: left">0.0303</td><td style="text-align: left">600</td><td style="text-align: left">-600</td></tr><tr><td style="text-align: left">2</td><td style="text-align: left">4</td><td style="text-align: left">5</td><td style="text-align: left">0.00798</td><td style="text-align: left">0.00176</td><td style="text-align: left">1700</td><td style="text-align: left">-1700</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Read in the contents of the CSV file <code>Branches.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">branch_params = CSV.read(&quot;MyData/Branches.csv&quot;, DataFrame)

branch_num = &quot;Branch Number&quot;
bus_from_col = &quot;Bus from&quot;
bus_to_col = &quot;Bus to&quot;
reactance = &quot;Reactance (p.u.)&quot;
resistance = &quot;Resistance (p.u.)&quot;
max_flow = &quot;Max Flow (MW)&quot;</code></pre><p>Build the lines and transformers using the <a href="../../model_library/generated_Line/#Line"><code>Line</code></a> and <a href="../../model_library/generated_Transformer2W/#Transformer2W"><code>Transformer2W</code></a> constructors.</p><pre><code class="language-julia hljs">for row in eachrow(branch_params)
    bus_from = get_bus(sys, row[bus_from_col])
    bus_to = get_bus(sys, row[bus_to_col])
    if get_base_voltage(bus_to) == get_base_voltage(bus_from)
        branch = Line(;
            name = &quot;line$(row[branch_num])&quot;,
            available = true,
            active_power_flow = 0.0,
            reactive_power_flow = 0.0,
            arc = Arc(; from = bus_from, to = bus_to),
            r = row[resistance],
            x = row[reactance],
            b = (from = 0.0, to = 0.0),
            rating = row[max_flow] / system_base_power,
            angle_limits = (min = 0.0, max = 0.0),
        )
    else
        branch = Transformer2W(;
            name = &quot;tline$(row[branch_num])&quot;,
            available = true,
            active_power_flow = 0.0,
            reactive_power_flow = 0.0,
            arc = Arc(; from = bus_from, to = bus_to),
            r = row[resistance],
            x = row[reactance],
            primary_shunt = 0.0,
            rating = row[max_flow] / system_base_power,
        )
    end
    add_component!(sys, branch)
end</code></pre><div class="admonition is-warning" id="Warning-749e5aa2156c67d3"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-749e5aa2156c67d3" title="Permalink"></a></header><div class="admonition-body"><p>When defining a branch that isn&#39;t attached to a <code>System</code> yet, you must define the thermal rating of the transmission line <a href="../../explanation/per_unit/#per_unit">per-unitized in &quot;SYSTEM_BASE&quot;</a> using the base power of the <code>System</code> you plan to connect it to – defined above as <code>system_base_power</code>.</p></div></div><h2 id="Adding-Thermal-Generators-and-their-Costs"><a class="docs-heading-anchor" href="#Adding-Thermal-Generators-and-their-Costs">Adding Thermal Generators and their Costs</a><a id="Adding-Thermal-Generators-and-their-Costs-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Thermal-Generators-and-their-Costs" title="Permalink"></a></h2><h3 id="Build-Thermal-Generators"><a class="docs-heading-anchor" href="#Build-Thermal-Generators">Build Thermal Generators</a><a id="Build-Thermal-Generators-1"></a><a class="docs-heading-anchor-permalink" href="#Build-Thermal-Generators" title="Permalink"></a></h3><p>We assume the data needed to build each <a href="../../model_library/generated_ThermalStandard/#ThermalStandard"><code>ThermalStandard</code></a> unit is found in a CSV file <code>Thermal_Gens.csv</code>. The following table is a snapshot of the first 7 columns of an example <code>Thermal_Gens.csv</code>:</p><table><tr><th style="text-align: left">Gen Name</th><th style="text-align: left">Bus</th><th style="text-align: left">Rating (MVA)</th><th style="text-align: left">Min Stable Level (MW)</th><th style="text-align: left">Max Capacity (MW)</th><th style="text-align: left">PrimeMoveType</th><th style="text-align: left">Fuel Type</th><th style="text-align: left">...</th></tr><tr><td style="text-align: left">Biomass 01</td><td style="text-align: left">12</td><td style="text-align: left">3</td><td style="text-align: left">0.9</td><td style="text-align: left">3.0</td><td style="text-align: left">OT</td><td style="text-align: left">AG_BIPRODUCT</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">Biomass 02</td><td style="text-align: left">103</td><td style="text-align: left">1.2</td><td style="text-align: left">0.36</td><td style="text-align: left">1.2</td><td style="text-align: left">OT</td><td style="text-align: left">AG_BIPRODUCT</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>The naming convention used for the contents of the <code>Bus</code> column must be consistent with the convention used in the <code>Bus Number</code> column of <code>Buses.csv</code>.</p><p>Read in the contents of the CSV file <code>Thermal_Gens.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.  Note that the <a href="../../api/enumerated_types/#pm_list"><code>PrimeMovers</code></a> in the <code>thermal_gens</code> data frame are consistent with EIA Form 923, and the <code>Fuel Type</code> column data are consistent with the <a href="../../api/enumerated_types/#tf_list"><code>ThermalFuels</code></a> naming convention.</p><pre><code class="language-julia hljs">thermal_gens = CSV.read(&quot;MyData/Thermal_Gens.csv&quot;, DataFrame)

name = &quot;Gen Name&quot;
bus_connection = &quot;Bus&quot;
rate = &quot;Rating (MVA)&quot;
min_active_power = &quot;Min Stable Level (MW)&quot;
max_active_power = &quot;Max Capacity (MW)&quot;
ramp_up = &quot;Max Ramp Up (MW/min)&quot;
ramp_down = &quot;Max Ramp Down (MW/min)&quot;
min_up = &quot;Min Up Time (h)&quot;
min_down = &quot;Min Down Time (h)&quot;
prime_move = &quot;PrimeMoveType&quot;
fuel = &quot;Fuel Type&quot;</code></pre><p>Build the thermal generator components using the <a href="../../model_library/generated_ThermalStandard/#ThermalStandard"><code>ThermalStandard</code></a> constructor and data stored in the <code>thermal_gens</code> data frame.</p><div class="admonition is-warning" id="Warning-54f919beadd276c5"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-54f919beadd276c5" title="Permalink"></a></header><div class="admonition-body"><p>When you define components that aren&#39;t attached to a <code>System</code> yet, the constructors assume define all fields related to power are <a href="../../explanation/per_unit/#per_unit">per-unitized in &quot;DEVICE_BASE&quot;</a>. Divide all fields with units such as MW, MVA, MVAR, or MW/min using the <code>base_power</code> of the component (with the exception of <code>base_power</code> itself, which is in MVA).</p></div></div><p>Since the example data is missing base power, we set base power equal to the rating data, and the rating parameter to 1.0:</p><pre><code class="language-julia hljs">for row in eachrow(thermal_gens)
    base = row[rate]
    thermal = ThermalStandard(;
        name = row[name],
        available = true,
        status = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        rating = 1.0,
        active_power_limits = (
            min = row[min_active_power] / base,
            max = row[max_active_power] / base,
        ),
        reactive_power_limits = (min = 0.0, max = 0.0),
        ramp_limits = (up = row[ramp_up] / base, down = row[ramp_down] / base),
        operation_cost = ThermalGenerationCost(nothing),
        base_power = base,
        time_limits = (up = row[min_up], down = row[min_down]),
        prime_mover_type = row[prime_move],
        fuel = row[fuel],
    )
    add_component!(sys, thermal)
end</code></pre><h3 id="Add-[ThermalGenerationCost](@ref)"><a class="docs-heading-anchor" href="#Add-[ThermalGenerationCost](@ref)">Add <a href="../../model_library/thermal_generation_cost/#ThermalGenerationCost"><code>ThermalGenerationCost</code></a></a><a id="Add-[ThermalGenerationCost](@ref)-1"></a><a class="docs-heading-anchor-permalink" href="#Add-[ThermalGenerationCost](@ref)" title="Permalink"></a></h3><p>In this example the <a href="../../model_library/thermal_generation_cost/#ThermalGenerationCost"><code>ThermalGenerationCost</code></a> constructor is defined by a <a href="../../api/public/#InfrastructureSystems.FuelCurve"><code>FuelCurve</code></a>. We are also assuming that the data needed to build each <a href="../../api/public/#InfrastructureSystems.FuelCurve"><code>FuelCurve</code></a> can be found in two separate CSV files. The first, <code>Thermal_Gens.csv</code>, has already been defined in the previous step. The second, <code>Thermal_Fuel_Rates.csv</code>, contains information regarding each <a href="../../api/enumerated_types/#tf_list"><code>FuelType</code></a> and its cost:</p><table><tr><th style="text-align: left">Fuel Type</th><th style="text-align: left">Fuel Price</th><th style="text-align: left">CO2 rate</th><th style="text-align: left">NOX rate</th><th style="text-align: left">SO2 rate</th></tr><tr><td style="text-align: left">COAL</td><td style="text-align: left">1.8</td><td style="text-align: left">203.5</td><td style="text-align: left">0.382</td><td style="text-align: left">0.33</td></tr><tr><td style="text-align: left">NATURAL_GAS</td><td style="text-align: left">5.4</td><td style="text-align: left">118</td><td style="text-align: left">0.079</td><td style="text-align: left">0.001</td></tr><tr><td style="text-align: left">OIL</td><td style="text-align: left">21</td><td style="text-align: left">123.1</td><td style="text-align: left">0.176</td><td style="text-align: left">0.006</td></tr><tr><td style="text-align: left">AG_BIPRODUCT</td><td style="text-align: left">2.4</td><td style="text-align: left">130</td><td style="text-align: left">0.177</td><td style="text-align: left">0.006</td></tr><tr><td style="text-align: left">GEOTHERMAL</td><td style="text-align: left">0</td><td style="text-align: left">0</td><td style="text-align: left">0.177</td><td style="text-align: left">0.006</td></tr></table><p>Read in <code>Thermal_Fuel_Rates.csv</code>, customize parameter names based on the column names in your CSV file, and create a dictionary pairing fuel types and fuel prices. Ensure that the strings populating the <code>Fuel Type</code> column match the strings populating the <code>Fuel Type</code> column of the <code>thermal_gens</code> data frame.</p><pre><code class="language-julia hljs">fuel_params = CSV.read(&quot;MyData/Thermal_Fuels_Rates.csv&quot;, DataFrame)

type = &quot;Fuel Type&quot;
price = &quot;Fuel Price&quot;

fuel_cost_dict = Dict{ThermalFuels, Float64}()
for row in eachrow(fuel_params)
    fuel_cost_dict[row[type]] = row[price]
end</code></pre><p>Next, we will create column name variables for heat rate bases, heat rates, load points, fixed, start up, and shut down costs from the thermal_gens data frame.  Use this data to build the <a href="../../api/public/#InfrastructureSystems.PiecewiseIncrementalCurve"><code>PiecewiseIncrementalCurve</code></a> and the <a href="../../api/public/#InfrastructureSystems.FuelCurve"><code>FuelCurve</code></a> functions, and add them to their associated thermal generator.</p><pre><code class="language-julia hljs">gen_name = &quot;Generator Name&quot;
heat_rate_base = &quot;Heat Rate Base (MMBTU/hr)&quot;
heat_rate = &quot;Heat Rate (MMBTU/hr)&quot;
load_point = &quot;Load Point Band (MW)&quot;
fixed_cost = &quot;Fixed Cost (dollar)&quot;
start_up_cost = &quot;Start Up Cost (dollar)&quot;
shut_down_cost = &quot;Shut Down Cost (dollar)&quot;

for row in eachrow(thermal_gens)
    thermal = get_component(ThermalStandard, sys, row[gen_name])
    heat_rate_curve =
        PieceWiseIncrementalCurve(row[heat_rate_base], row[load_point], row[heat_rate])
    fuel_curve =
        FuelCurve(;
            value_curve = heat_rate_curve,
            fuel_cost = fuel_cost_dict[row[fuel]],
        )
    cost_thermal = ThermalGenerationCost(;
        variable = fuel_curve,
        fixed = row[fixed_cost],
        start_up = row[start_up_cost],
        shut_down = row[shut_down_cost],
    )
    set_operation_cost!(thermal, cost_thermal)
end</code></pre><p>For more information regarding thermal cost functions please visit <a href="../../model_library/thermal_generation_cost/#ThermalGenerationCost"><code>ThermalGenerationCost</code></a>.</p><h2 id="Adding-Renewable-Generators-and-Their-Time-Series"><a class="docs-heading-anchor" href="#Adding-Renewable-Generators-and-Their-Time-Series">Adding Renewable Generators and Their Time Series</a><a id="Adding-Renewable-Generators-and-Their-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Renewable-Generators-and-Their-Time-Series" title="Permalink"></a></h2><p>The following section demonstrates how to add solar generators and their time series to a <a href="../../api/public/#System"><code>System</code></a>. However, if you desire to add other <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a> generator types, such as wind, the process is exactly the same, with changing the <a href="../../api/enumerated_types/#pm_list">prime mover type</a> from <code>PrimeMovers.PVe</code> to <code>PrimeMovers.WT</code>.</p><p>We assume the data needed to build each solar powered <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a> unit is found in the CSV file <code>Solar_Gens.csv</code>, snapshotted below.  The convention used for the contents of the <code>Bus</code> column must be consistent with the convention used in the <code>Bus Number</code> column of <code>Buses.csv</code>:</p><table><tr><th style="text-align: left">Gen Name</th><th style="text-align: left">Number</th><th style="text-align: left">Bus</th><th style="text-align: left">Rating (MVA)</th></tr><tr><td style="text-align: left">Solar 01</td><td style="text-align: left">1</td><td style="text-align: left">32</td><td style="text-align: left">746.76</td></tr><tr><td style="text-align: left">Solar 02</td><td style="text-align: left">2</td><td style="text-align: left">92</td><td style="text-align: left">369.26</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Read in the contents of the CSV file <code>Solar_Gens.csv</code> to a data frame, and customize the parameter names based on the column names in your CSV file and the desired prime mover type.</p><pre><code class="language-julia hljs">solar_gens = CSV.read(&quot;MyData/Solar_Gens.csv&quot;, DataFrame)

name = &quot;Gen Name&quot;
num = &quot;Number&quot;
bus_connection = &quot;Bus&quot;
rate = &quot;Rating (MVA)&quot;
prime_mover = PrimeMovers.PVe</code></pre><p>Before building the solar generators, we must also set up the solar generators&#39; time series. In this example, we assume that each solar generator has a unique time series, and all of these time series are contained in one file: <code>MyData/Solar_Time_Series.csv</code>. Here is a snapshot of this time series CSV file, where the first column contains time stamps, and the remaining columns are titled with its respective generator&#39;s name, and contain the time series values in MW for each solar generator:</p><table><tr><th style="text-align: left">Time Stamp</th><th style="text-align: left">Solar 01</th><th style="text-align: left">Solar 02</th><th style="text-align: left">Solar 03</th><th style="text-align: left">...</th></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">1/1/23 09:00</td><td style="text-align: left">51.36</td><td style="text-align: left">118.11</td><td style="text-align: left">54.92</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">1/1/23 10:00</td><td style="text-align: left">138.61</td><td style="text-align: left">200.32</td><td style="text-align: left">6.85</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Each time series for its respective solar generator has an hourly resolution, and is for the year 2023, plus one full day into 2024, for a total of 366 days, and 8784 values per column.</p><p>Create a data frame from <code>Solar_Time_Series.csv</code> and define variables for the aforementioned resolution and time stamps:</p><pre><code class="language-julia hljs">solar_time_series = CSV.read(&quot;MyData/Solar_Time_Series.csv&quot;, DataFrame)

resolution = Dates.Hour(1);
timestamps = range(DateTime(&quot;2023-01-01T00:00:00&quot;); step = resolution, length = 8784);</code></pre><p>In this example, we assume that the <a href="../../model_library/renewable_generation_cost/#RenewableGenerationCost"><code>RenewableGenerationCost</code></a> is at zero marginal cost. If the marginal cost is not zero, follow similar steps to building the <a href="../../model_library/thermal_generation_cost/#ThermalGenerationCost"><code>ThermalGenerationCost</code></a> constructor from above, but for the <a href="../../model_library/renewable_generation_cost/#RenewableGenerationCost"><code>RenewableGenerationCost</code></a> constructor instead.</p><p>Moreover, since the example data is missing base power, we use the range of values in the time series data to determine the value of the base power which will be used to normalize the time series, and set the generator&#39;s rating parameter to 1.0. (If your data reports a base power, use that for the generator&#39;s base power, and rating data for the generator&#39;s rating).</p><p>In the same <code>for</code> loop, we will build the solar generator components using the <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a> constructor and data stored in the <code>solar_gens</code> data frame, and build and attach each solar generator&#39;s time series:</p><pre><code class="language-julia hljs">for row in eachrow(solar_gens)
    norm = maximum(solar_time_series[:, row[name]])
    solar_data_MW = solar_time_series[:, row[name]]
    base = row[rate]
    if any((solar_data_MW ./ base) .&gt; 1.0)
        @warn &quot;Generator $(row[name]) has a production larger than its base power. Normalizing by its maximum&quot;
        base = norm
    end
    solar_array = TimeArray(timestamps, (solar_data_MW ./ base)) # normalize data
    solar_TS = SingleTimeSeries(;
        name = &quot;max_active_power&quot;,
        data = solar_array,
        scaling_factor_multiplier = get_max_active_power,
    )
    solar = RenewableDispatch(;
        name = row[name],
        available = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        rating = 1.0,
        prime_mover_type = prime_mover,
        reactive_power_limits = (min = 0.0, max = 0.0),
        power_factor = 1.0,
        operation_cost = RenewableGenerationCost(zero(CostCurve)),
        base_power = base,
    )
    add_component!(sys, solar)
    add_time_series!(sys, solar, solar_TS)
end</code></pre><h2 id="Adding-Hydro-Generators-and-Their-Time-Series"><a class="docs-heading-anchor" href="#Adding-Hydro-Generators-and-Their-Time-Series">Adding Hydro Generators and Their Time Series</a><a id="Adding-Hydro-Generators-and-Their-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Hydro-Generators-and-Their-Time-Series" title="Permalink"></a></h2><p>We assume the data needed to build each <a href="../../model_library/generated_HydroDispatch/#HydroDispatch"><code>HydroDispatch</code></a> unit is found in a CSV file <code>Hydro_Gens.csv</code>, snapshotted below. The convention used for the contents of the <code>Bus</code> column must be consistent with the convention used in the <code>Bus Number</code> column of <code>Buses.csv</code>.</p><table><tr><th style="text-align: left">Gen Name</th><th style="text-align: left">Number</th><th style="text-align: left">Bus</th><th style="text-align: left">Min Stable Level (MW)</th><th style="text-align: left">Max Capacity (MW)</th><th style="text-align: left">Max Ramp Up (MW/min)</th><th style="text-align: left">...</th></tr><tr><td style="text-align: left">Hydro 01</td><td style="text-align: left">1</td><td style="text-align: left">56</td><td style="text-align: left">0.0</td><td style="text-align: left">75.0</td><td style="text-align: left">0.83</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">Hydro 02</td><td style="text-align: left">2</td><td style="text-align: left">66</td><td style="text-align: left">0.0</td><td style="text-align: left">77.0</td><td style="text-align: left">0.86</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Read in the contents of the CSV file <code>Hydro_Gens.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">hydro_gens = CSV.read(&quot;MyData/Hydro_Gens.csv&quot;, DataFrame)

name = &quot;Gen Name&quot;
bus_connection = &quot;Bus&quot;
num = &quot;Number&quot;
rate = &quot;Rating (MVA)&quot;
min_active_power = &quot;Min Stable Level (MW)&quot;
max_active_power = &quot;Max Capacity (MW)&quot;
ramp_up = &quot;Max Ramp Up (MW/min)&quot;
ramp_down = &quot;Max Ramp Down (MW/min)&quot;
min_up = &quot;Min Up Time (h)&quot;
min_down = &quot;Min Down Time (h)&quot;</code></pre><p>Before building the hydro generators, we must also set up the hydro generators&#39; time series. In this example, we assume that each hydro generator has a unique time series, and all of these time series are contained in one file: <code>MyData/Hydro_Time_Series.csv</code>. Here is a snapshot of this time series CSV file, where the first column contains time stamps, and the remaining columns are titled with its respective generator&#39;s name, and contain the time series values in MW for each hydro generator:</p><table><tr><th style="text-align: left">Time Stamp</th><th style="text-align: left">Hydro 01</th><th style="text-align: left">Hydro 02</th><th style="text-align: left">Hydro 03</th><th style="text-align: left">...</th></tr><tr><td style="text-align: left">1/1/23 0:00</td><td style="text-align: left">0.325386</td><td style="text-align: left">0.325409</td><td style="text-align: left">0.314454</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">1/1/23 1:00</td><td style="text-align: left">0.325386</td><td style="text-align: left">0.325409</td><td style="text-align: left">0.314454</td><td style="text-align: left">...</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Each time series for its respective hydro generator has an hourly resolution, and is for the year 2023, plus one full day into 2024, for a total of 366 days, and 8784 values per column.</p><p>Create a data frame from <code>Hydro_Time_Series.csv</code> and define variables for the aforementioned resolution and time stamps:</p><pre><code class="language-julia hljs">hydro_time_series = CSV.read(&quot;MyData/Hydro_Time_Series.csv&quot;, DataFrame)

resolution = Dates.Hour(1);
timestamps = range(DateTime(&quot;2023-01-01T00:00:00&quot;); step = resolution, length = 8784);</code></pre><p>In this example, we assume that the <a href="../../model_library/hydro_generation_cost/#HydroGenerationCost"><code>HydroGenerationCost</code></a> has both zero fixed and variable costs. Moreover, since the example data is missing base power, we use the range of values in the time series data to determine the value of the base power which will be used to normalize the time series and other parameters, and set the generator&#39;s rating parameter to 1.0. (If your data reports a base power, use that for the generator&#39;s base power, and rating data for the generator&#39;s rating).</p><p>In the same <code>for</code> loop, we will build the hydro generator components using the <a href="../../model_library/generated_HydroDispatch/#HydroDispatch"><code>HydroDispatch</code></a> constructor and data stored in the <code>hydro_gens</code> data frame, and build and attach each hydro generator&#39;s time series:</p><pre><code class="language-julia hljs">for row in eachrow(hydro_gens)
    norm = maximum(hydro_time_series[:, row[name]])
    hydro_data_MW = hydro_time_series[:, row[name]]
    base = row[rate]
    if any((hydro_data_MW ./ base) .&gt; 1.0)
        @warn &quot;Generator $(row[name]) has a production larger than its base power. Normalizing by its maximum&quot;
        base = norm
    end
    hydro_array = TimeArray(timestamps, (hydro_data_MW ./ base)) # normalize data
    hydro_TS = SingleTimeSeries(;
        name = &quot;max_active_power&quot;,
        data = hydro_array,
        scaling_factor_multiplier = get_max_active_power,
    )
    hydro = HydroDispatch(;
        name = row[name],
        available = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        rating = 1.0,
        prime_mover_type = PrimeMovers.HA,
        active_power_limits = (
            min = row[min_active_power] / base,
            max = row[max_active_power] / base,
        ),
        reactive_power_limits = (min = 0.0, max = 0.0),
        ramp_limits = (up = row[ramp_up] / base, down = row[ramp_down] / base),
        time_limits = (up = row[min_up], down = row[min_down]),
        base_power = base,
        operation_cost = HydroGenerationCost(zero(LinearCurve), 0.0),
    )
    add_component!(sys, hydro)
    add_time_series!(sys, hydro, hydro_TS)
end</code></pre><h2 id="Adding-Loads-and-Their-Time-Series"><a class="docs-heading-anchor" href="#Adding-Loads-and-Their-Time-Series">Adding Loads and Their Time Series</a><a id="Adding-Loads-and-Their-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Loads-and-Their-Time-Series" title="Permalink"></a></h2><p>In this example, we assume that all loads will be represented as <a href="../../model_library/generated_PowerLoad/#PowerLoad"><code>PowerLoad</code></a> components, and that the loads are located in three regions. Each region has one unique time series, and every load in each region is assigned its region&#39;s normalized time series profile.</p><p>The data needed to build each <a href="../../model_library/generated_PowerLoad/#PowerLoad"><code>PowerLoad</code></a> unit is found in the CSV file <code>Loads.csv</code>, snapshotted below. The convention used for the contents of the <code>Bus</code> column must be consistent with the convention used in the <code>Bus Number</code> column of <code>Buses.csv</code>, and similarly for the <code>Region</code> column.</p><table><tr><th style="text-align: left">Load Number</th><th style="text-align: left">Bus</th><th style="text-align: left">Region</th><th style="text-align: left">Participation Factor</th></tr><tr><td style="text-align: left">1</td><td style="text-align: left">1</td><td style="text-align: left">R1</td><td style="text-align: left">0.047168669</td></tr><tr><td style="text-align: left">2</td><td style="text-align: left">2</td><td style="text-align: left">R2</td><td style="text-align: left">0.0184963</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Read in the contents of the CSV file <code>Loads.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">load_params = CSV.read(&quot;MyData/Loads.csv&quot;, DataFrame)

region = &quot;Region&quot;
bus_connection = &quot;Bus&quot;
factor = &quot;Load Participation Factor&quot;
number = &quot;Load Number&quot;</code></pre><p>Before building the loads, we must also set up the loads&#39; time series. In this example, we assume that each load region has a unique time series, and all of these time series are contained in one file: <code>MyData/Load_Time_Series.csv</code>. Here is a snapshot of this time series CSV file, where the first column contains time stamps, and the remaining columns are titled with its respective region&#39;s name, and contain the time series values in MW for each region:</p><table><tr><th style="text-align: left">Time Stamp</th><th style="text-align: left">R1</th><th style="text-align: left">R2</th><th style="text-align: left">R3</th></tr><tr><td style="text-align: left">1/1/23 0:00</td><td style="text-align: left">5465.7296</td><td style="text-align: left">1904.4448</td><td style="text-align: left">2486.38409</td></tr><tr><td style="text-align: left">1/1/23 1:00</td><td style="text-align: left">4994.53821</td><td style="text-align: left">1726.22134</td><td style="text-align: left">2273.63274</td></tr><tr><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td><td style="text-align: left">...</td></tr></table><p>Each time series for its respective load region has an hourly resolution, and is for the year 2023, plus one full day into 2024, for a total of 366 days, and 8784 values per column. Ensure that your time series file is similarly formatted.</p><p>Create a data frame from <code>Load_Time_Series.csv</code> and define variables for the aforementioned resolution and time stamps:</p><pre><code class="language-julia hljs">load_time_series = CSV.read(&quot;MyData/Load_Time_Series.csv&quot;, DataFrame)

resolution = Dates.Hour(1);
timestamps = range(DateTime(&quot;2023-01-01T00:00:00&quot;); step = resolution, length = 8784);</code></pre><p>Construct and attach the loads to the system using the <a href="../../model_library/generated_PowerLoad/#PowerLoad"><code>PowerLoad</code></a> constructor according to their regions. Because all loads in each region share a time series profile, the <code>max_active_power</code> of each load will depend on the maximum time series value of its region and its load participation factor.</p><pre><code class="language-julia hljs">for row in eachrow(load_params)
    num = row[number]
    max = maximum(load_time_series[:, row[region]])
    load = PowerLoad(;
        name = &quot;load$num&quot;,
        available = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        base_power = system_base_power,
        max_active_power = (max) * (row[factor]) / system_base_power,
        max_reactive_power = 0.0,
    )
    add_component!(sys, load)
end</code></pre><p>In a <code>for</code> loop, iterate over the regions in your <a href="../../api/public/#System"><code>System</code></a>, and use the <a href="../../api/public/#PowerSystems.begin_time_series_update-Tuple{Function, System}"><code>begin_time_series_update</code></a> function to create and attach the respective loads&#39; time series to every load in a region at once. Note: due to how <code>max_active_power</code> is defined, the time series values are normalized to its maximum.</p><pre><code class="language-julia hljs">regions = unique(load_params[:, region])

for reg in regions
    norm = maximum(load_time_series[:, reg])
    load_array = TimeArray(
        timestamps,
        (load_time_series[:, reg] ./ norm),
    )
    load_TS = SingleTimeSeries(;
        name = &quot;max_active_power&quot;,
        data = load_array,
        scaling_factor_multiplier = get_max_active_power,
    )
    region = get_component(Area, sys, reg)
    begin_time_series_update(sys) do
        for component in get_components_in_aggregation_topology(PowerLoad, sys, region)
            add_time_series!(sys, component, load_TS)
        end
    end
end</code></pre><h2 id="Customizing-and-Expanding"><a class="docs-heading-anchor" href="#Customizing-and-Expanding">Customizing and Expanding</a><a id="Customizing-and-Expanding-1"></a><a class="docs-heading-anchor-permalink" href="#Customizing-and-Expanding" title="Permalink"></a></h2><p>Additional resources to help you built your own custom <a href="../../api/public/#System"><code>System</code></a>:</p><ul><li>See how to <a href="../adding_additional_fields/#additional_fields">Add additional data to a component</a></li><li>Learn about <a href="../../tutorials/generated_add_dynamic_data/#Adding-Data-for-Dynamic-Simulations">Adding Data for Dynamic Simulations</a>, which could also be loaded in a <code>for</code> loop from a .csv, if you don&#39;t have PSS/e files available for <a href="../parse_dynamic_data/#dyr_data">automated parsing</a></li><li>See more on how to <a href="../parse_ts_from_csvs/#parsing_time_series">Parse Time Series Data from .csv&#39;s</a></li><li>See how to <a href="../add_new_types/#Add-a-New-or-Custom-Type">Add a New or Custom Type</a></li><li>See how to <a href="../add_component_natural_units/#Add-a-Component-in-Natural-Units">Add a Component in Natural Units</a>, which is an alternative to the per-unitized <code>for</code> loops above, but requires more code</li><li>See how to <a href="../serialize_data/#Write,-View,-and-Load-Data-with-a-JSON">Write, View, and Load Data with a JSON</a> to efficiently save your <a href="../../api/public/#System"><code>System</code></a> once you&#39;ve built it</li></ul><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../parse_dynamic_data/">« Parse PSS/e dynamic data</a><a class="docs-footer-nextpage" href="../serialize_data/">Save and read data with a JSON »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Saturday 28 February 2026 00:03">Saturday 28 February 2026</span>. Using Julia version 1.12.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
