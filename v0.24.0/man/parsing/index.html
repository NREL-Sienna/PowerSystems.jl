<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Constructing a System from raw data · PowerSystems.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="PowerSystems.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">PowerSystems.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">User Guide</span><ul><li class="is-active"><a class="tocitem" href>Constructing a System from raw data</a><ul class="internal"><li><a class="tocitem" href="#Supported-Formats"><span>Supported Formats</span></a></li><li><a class="tocitem" href="#PowerSystems-Table-Data"><span>PowerSystems Table Data</span></a></li><li><a class="tocitem" href="#MATPOWER-/-PSS/E"><span>MATPOWER / PSS/E</span></a></li></ul></li><li><a class="tocitem" href="../data/">Saving and Viewing PowerSystems Data</a></li></ul></li><li><span class="tocitem">Developer</span><ul><li><a class="tocitem" href="../../developer/tests/">Tests</a></li><li><a class="tocitem" href="../../developer/logging/">Logging</a></li><li><a class="tocitem" href="../../developer/style/">Style Guide</a></li><li><a class="tocitem" href="../../developer/extending_parsing/">Extending Parsing</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../api/PowerSystems/">PowerSystems</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li class="is-active"><a href>Constructing a System from raw data</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Constructing a System from raw data</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL-SIIP/PowerSystems.jl/blob/master/docs/src/man/parsing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Constructing-a-System-from-raw-data"><a class="docs-heading-anchor" href="#Constructing-a-System-from-raw-data">Constructing a System from raw data</a><a id="Constructing-a-System-from-raw-data-1"></a><a class="docs-heading-anchor-permalink" href="#Constructing-a-System-from-raw-data" title="Permalink"></a></h1><h2 id="Supported-Formats"><a class="docs-heading-anchor" href="#Supported-Formats">Supported Formats</a><a id="Supported-Formats-1"></a><a class="docs-heading-anchor-permalink" href="#Supported-Formats" title="Permalink"></a></h2><ul><li>PowerSystems table data</li><li>MATPOWER (parsed by PowerModels)</li><li>PSS/E (parsed by PowerModels)</li></ul><h2 id="PowerSystems-Table-Data"><a class="docs-heading-anchor" href="#PowerSystems-Table-Data">PowerSystems Table Data</a><a id="PowerSystems-Table-Data-1"></a><a class="docs-heading-anchor-permalink" href="#PowerSystems-Table-Data" title="Permalink"></a></h2><p>This is a custom format that allows users to define power system component data by category and column with custom names, types, and units.</p><h3 id="Categories"><a class="docs-heading-anchor" href="#Categories">Categories</a><a id="Categories-1"></a><a class="docs-heading-anchor-permalink" href="#Categories" title="Permalink"></a></h3><p>Components for each category must be defined in their own CSV file. The following categories are currently supported:</p><ul><li>branch.csv</li><li>bus.csv</li><li>dc_branch.csv</li><li>gen.csv</li><li>load.csv</li><li>reserves.csv</li><li>storage.csv</li></ul><p>These must reside in the directory passed when constructing PowerSystemTableData.</p><h3 id="Customization"><a class="docs-heading-anchor" href="#Customization">Customization</a><a id="Customization-1"></a><a class="docs-heading-anchor-permalink" href="#Customization" title="Permalink"></a></h3><p>Generate a configuration file (such as <code>user_descriptors.yaml</code>) from the defaults, which are stored in <code>src/descriptors/power_system_inputs.json</code>.</p><pre><code class="language-none">python ./bin/generate_config_file.py ./user_descriptors.yaml</code></pre><p>Next, edit this file with your customizations.</p><p>Note that the user-specific customizations are stored in YAML rather than JSON to allow for easier editing. The next few sections describe changes you can make to this YAML file.  Do not edit the default JSON file.</p><h4 id="Column-names"><a class="docs-heading-anchor" href="#Column-names">Column names</a><a id="Column-names-1"></a><a class="docs-heading-anchor-permalink" href="#Column-names" title="Permalink"></a></h4><p>PowerSystems provides a mapping capability that allows you to keep your own column names.</p><p>For example, when parsing raw data for a generator the code expects a column called <code>name</code>. If the raw data instead defines that column as <code>GEN UID</code> then you can change the <code>custom_name</code> field under the <code>generator</code> category to <code>GEN UID</code> in your YAML file. </p><h4 id="Per-unit-conversion"><a class="docs-heading-anchor" href="#Per-unit-conversion">Per-unit conversion</a><a id="Per-unit-conversion-1"></a><a class="docs-heading-anchor-permalink" href="#Per-unit-conversion" title="Permalink"></a></h4><p>PowerSystems defines whether it expects a column value to be per-unit in <code>power_system_inputs.json</code>. If it expects per-unit but your values are not per-unit then you can set <code>system_per_unit: false</code> in <code>user_descriptors.yaml</code> and PowerSystems will automatically convert the values.</p><h4 id="Unit-conversion"><a class="docs-heading-anchor" href="#Unit-conversion">Unit conversion</a><a id="Unit-conversion-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-conversion" title="Permalink"></a></h4><p>PowerSystems provides a limited set of unit conversions. For example, if <code>power_system_inputs.json</code> indicates that a value&#39;s unit is degrees but your values are in radians then you can set <code>unit_conversion: radian</code> in your YAML file.</p><h4 id="Example-file"><a class="docs-heading-anchor" href="#Example-file">Example file</a><a id="Example-file-1"></a><a class="docs-heading-anchor-permalink" href="#Example-file" title="Permalink"></a></h4><p>Refer to <a href="https://github.com/GridMod/RTS-GMLC/blob/master/RTS_Data/FormattedData/SIIP/user_descriptors.yaml">RTS_GMLC</a> for an example.</p><h3 id="Time-series-data"><a class="docs-heading-anchor" href="#Time-series-data">Time series data</a><a id="Time-series-data-1"></a><a class="docs-heading-anchor-permalink" href="#Time-series-data" title="Permalink"></a></h3><p>PowerSystems requires a metadata file that maps components to their time series data in order to be able to automatically construct forecasts from raw data files. The following fields are required for each time array:</p><ul><li>simulation:  User description of simulation</li><li>category:  Type of component. Must map to PowerSystems abstract types (Bus, ElectricLoad, Generator, LoadZone, Reserve)</li><li>component_name:  Name of component</li><li>label:  Name of accessor function that can be called on the component to retrieve the forecasted value.</li><li>scaling_factor:  Controls normalization of the data. Use 1.0 for pre-normalized data. Use &#39;Max&#39; to divide the timeseries by the max value in the column. Use any float for a custom scaling factor.</li><li>data_file:  Path to the time series data file</li></ul><p>PowerSystems supports this metadata in either CSV or JSON formats. Refer to <a href="https://github.com/GridMod/RTS-GMLC/blob/master/RTS_Data/FormattedData/SIIP/timeseries_pointers.json">RTS_GMLC</a> for an example.</p><h4 id="Performance-considerations"><a class="docs-heading-anchor" href="#Performance-considerations">Performance considerations</a><a id="Performance-considerations-1"></a><a class="docs-heading-anchor-permalink" href="#Performance-considerations" title="Permalink"></a></h4><p>By default PowerSystems stores time series data in HDF5 files. It does not keep all of the data in memory. This means that every time you access a forecast PowerSystems will have to read the data from storage, which will add latency. If you know ahead of time that all of your data will fit in memory then you can change this behavior by passing <code>time_series_in_memory = true</code> when you create the System.</p><p>If the time series data is stored in HDF5 then PowerSystems will use the tmp filesystem by default. You can change this by passing <code>time_series_directory = X</code> when you create the System. This is required if the time series data is larger than the amount of tmp space available.</p><h3 id="Custom-construction-of-generators"><a class="docs-heading-anchor" href="#Custom-construction-of-generators">Custom construction of generators</a><a id="Custom-construction-of-generators-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-construction-of-generators" title="Permalink"></a></h3><p>PowerSystems supports custom construction of subtypes of the abstract type Generator based on <code>fuel</code> and <code>type</code>. The parsing code detects these fields in the raw data and then constructs the concrete type listed in the passed generator mapping file. The default file is <code>src/parsers/generator_mapping.yaml</code>. You can override this behavior by specifying your own file when constructing PowerSystemTableData.</p><h3 id="System-creation-with-custom-config-files"><a class="docs-heading-anchor" href="#System-creation-with-custom-config-files">System creation with custom config files</a><a id="System-creation-with-custom-config-files-1"></a><a class="docs-heading-anchor-permalink" href="#System-creation-with-custom-config-files" title="Permalink"></a></h3><p>Here is an example of how to construct a System with all customizations listed on this page.</p><pre><code class="language-julia">data_dir = &quot;/data/my-data-dir&quot;
base_power = 100.0
descriptors = &quot;./user_descriptors.yaml&quot;
timeseries_metadata_file = &quot;./timeseries_pointers.json&quot;
generator_mapping_file = &quot;./generator_mapping.yaml&quot;
data = PowerSystemTableData(
    data_dir,
    base_power,
    descriptors;
    timeseries_metadata_file = timeseries_metadata_file,
    generator_mapping_file = generator_mapping_file,
)
sys = System(data, time_series_in_memory = true)</code></pre><h2 id="MATPOWER-/-PSS/E"><a class="docs-heading-anchor" href="#MATPOWER-/-PSS/E">MATPOWER / PSS/E</a><a id="MATPOWER-/-PSS/E-1"></a><a class="docs-heading-anchor-permalink" href="#MATPOWER-/-PSS/E" title="Permalink"></a></h2><p>The following code will create a System from a MATPOWER or PSS/E file by first parsing it with <a href="https://github.com/lanl-ansi/PowerModels.jl">PowerModels</a>.</p><pre><code class="language-julia">sys = System(PowerSystems.PowerModelsData(&quot;./case5.m&quot;))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../data/">Saving and Viewing PowerSystems Data »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 25 July 2020 07:13">Saturday 25 July 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
