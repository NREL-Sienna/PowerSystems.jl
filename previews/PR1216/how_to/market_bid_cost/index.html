<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>...add a market bid · PowerSystems.jl</title><meta name="title" content="...add a market bid · PowerSystems.jl"/><meta property="og:title" content="...add a market bid · PowerSystems.jl"/><meta property="twitter:title" content="...add a market bid · PowerSystems.jl"/><meta name="description" content="Documentation for PowerSystems.jl."/><meta property="og:description" content="Documentation for PowerSystems.jl."/><meta property="twitter:description" content="Documentation for PowerSystems.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="PowerSystems.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PowerSystems.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome Page</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/creating_system/">Create and Explore a Power <code>System</code></a></li><li><a class="tocitem" href="../../tutorials/working_with_time_series/">Working with Time Series</a></li><li><a class="tocitem" href="../../tutorials/add_dynamic_data/">Adding Data for Dynamic Simulations</a></li></ul></li><li><span class="tocitem">How to...</span><ul><li><a class="tocitem" href="../install/">...install PowerSystems.jl</a></li><li><a class="tocitem" href="../powersystembuilder/">...load a <code>system</code> from <code>PowerSystemCaseBuilder</code></a></li><li><a class="tocitem" href="../parse_matpower_psse/">...parse data from MATPOWER or PSS/e files</a></li><li><a class="tocitem" href="../parse_dynamic_data/">...parse PSS/e dynamic data</a></li><li><a class="tocitem" href="../parse_tabular_data/">...parse tabular data from .csv files</a></li><li><a class="tocitem" href="../parse_ts_from_csvs/">...parse time series data from .csv files</a></li><li><a class="tocitem" href="../add_component_natural_units/">...add a component using natural units (MW)</a></li><li><a class="tocitem" href="../get_buses/">...get all the buses in a system</a></li><li><a class="tocitem" href="../get_available_generators/">...get the available generators in a system</a></li><li><a class="tocitem" href="../add_cost_curve/">...add an Operating Cost</a></li><li class="is-active"><a class="tocitem" href>...add a market bid</a><ul class="internal"><li><a class="tocitem" href="#Adding-a-Single-Incremental-Energy-bids-to-MarketBidCost"><span>Adding a Single Incremental Energy bids to MarketBidCost</span></a></li><li><a class="tocitem" href="#Adding-Time-Series-Energy-bids-to-MarketBidCost"><span>Adding Time Series Energy bids to MarketBidCost</span></a></li></ul></li><li><a class="tocitem" href="../adding_additional_fields/">...add additional data to a component</a></li><li><a class="tocitem" href="../add_new_types/">...customize or add a new Type</a></li><li><a class="tocitem" href="../improve_ts_performance/">...improve performance with time series data</a></li><li><a class="tocitem" href="../serialize_data/">...write and read data with a JSON</a></li><li><a class="tocitem" href="../reduce_repl_printing/">...reduce REPL printing</a></li><li><a class="tocitem" href="../migrating_to_psy4/">...migrate from version 3.0 to 4.0</a></li></ul></li><li><span class="tocitem">Explanation</span><ul><li><a class="tocitem" href="../../explanation/system/">System</a></li><li><a class="tocitem" href="../../explanation/type_structure/">Type Structure</a></li><li><a class="tocitem" href="../../explanation/per_unit/">Per-unit Conventions</a></li><li><a class="tocitem" href="../../explanation/time_series/">Time Series Data</a></li><li><a class="tocitem" href="../../explanation/dynamic_data/">Dynamic Devices</a></li></ul></li><li><span class="tocitem">Model Library</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">DynamicInverterComponent</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Converter/">Converter</a></li><li><a class="tocitem" href="../../model_library/generated_DCSource/">DCSource</a></li><li><a class="tocitem" href="../../model_library/generated_Filter/">Filter</a></li><li><a class="tocitem" href="../../model_library/generated_FrequencyEstimator/">FrequencyEstimator</a></li><li><a class="tocitem" href="../../model_library/generated_InnerControl/">InnerControl</a></li><li><a class="tocitem" href="../../model_library/generated_OutputCurrentLimiter/">OutputCurrentLimiter</a></li><li><a class="tocitem" href="../../model_library/outer_control/">OuterControl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">StaticInjection</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_FixedAdmittance/">FixedAdmittance</a></li><li><a class="tocitem" href="../../model_library/generated_InterruptiblePowerLoad/">InterruptiblePowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_ExponentialLoad/">ExponentialLoad</a></li><li><a class="tocitem" href="../../model_library/generated_PowerLoad/">PowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_StandardLoad/">StandardLoad</a></li><li><a class="tocitem" href="../../model_library/generated_SwitchedAdmittance/">SwitchedAdmittance</a></li><li><a class="tocitem" href="../../model_library/generated_HydroDispatch/">HydroDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_HydroEnergyReservoir/">HydroEnergyReservoir</a></li><li><a class="tocitem" href="../../model_library/generated_HydroPumpedStorage/">HydroPumpedStorage</a></li><li><a class="tocitem" href="../../model_library/generated_RenewableDispatch/">RenewableDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_RenewableNonDispatch/">RenewableNonDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_ThermalMultiStart/">ThermalMultiStart</a></li><li><a class="tocitem" href="../../model_library/generated_ThermalStandard/">ThermalStandard</a></li><li><a class="tocitem" href="../../model_library/generated_InterconnectingConverter/">InterconnectingConverter</a></li><li><a class="tocitem" href="../../model_library/generated_Source/">Source</a></li><li><a class="tocitem" href="../../model_library/generated_EnergyReservoirStorage/">EnergyReservoirStorage</a></li><li><a class="tocitem" href="../../model_library/hybrid_system/">HybridSystem</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Operating Costs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/thermal_generation_cost/">ThermalGenerationCost</a></li><li><a class="tocitem" href="../../model_library/hydro_generation_cost/">HydroGenerationCost</a></li><li><a class="tocitem" href="../../model_library/renewable_generation_cost/">RenewableGenerationCost</a></li><li><a class="tocitem" href="../../model_library/storage_cost/">StorageCost</a></li><li><a class="tocitem" href="../../model_library/load_cost/">LoadCost</a></li><li><a class="tocitem" href="../../model_library/market_bid_cost/">MarketBidCost</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-4" type="checkbox"/><label class="tocitem" for="menuitem-5-4"><span class="docs-label">Topology</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Area/">Area</a></li><li><a class="tocitem" href="../../model_library/generated_LoadZone/">LoadZone</a></li><li><a class="tocitem" href="../../model_library/generated_Arc/">Arc</a></li><li><a class="tocitem" href="../../model_library/generated_ACBus/">ACBus</a></li><li><a class="tocitem" href="../../model_library/generated_DCBus/">DCBus</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-5" type="checkbox"/><label class="tocitem" for="menuitem-5-5"><span class="docs-label">DynamicInjection</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_ActiveConstantPowerLoad/">ActiveConstantPowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_AggregateDistributedGenerationA/">AggregateDistributedGenerationA</a></li><li><a class="tocitem" href="../../model_library/generated_CSVGN1/">CSVGN1</a></li><li><a class="tocitem" href="../../model_library/generated_DynamicExponentialLoad/">DynamicExponentialLoad</a></li><li><a class="tocitem" href="../../model_library/generated_GenericDER/">GenericDER</a></li><li><a class="tocitem" href="../../model_library/generated_PeriodicVariableSource/">PeriodicVariableSource</a></li><li><a class="tocitem" href="../../model_library/generated_SimplifiedSingleCageInductionMachine/">SimplifiedSingleCageInductionMachine</a></li><li><a class="tocitem" href="../../model_library/generated_SingleCageInductionMachine/">SingleCageInductionMachine</a></li><li><a class="tocitem" href="../../model_library/dynamic_inverter/">Dynamic Inverter</a></li><li><a class="tocitem" href="../../model_library/dynamic_generator/">Dynamic Generator</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-6" type="checkbox"/><label class="tocitem" for="menuitem-5-6"><span class="docs-label">Service</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_AGC/">AGC</a></li><li><a class="tocitem" href="../../model_library/generated_ConstantReserveNonSpinning/">ConstantReserveNonSpinning</a></li><li><a class="tocitem" href="../../model_library/generated_VariableReserveNonSpinning/">VariableReserveNonSpinning</a></li><li><a class="tocitem" href="../../model_library/generated_TransmissionInterface/">TransmissionInterface</a></li><li><a class="tocitem" href="../../model_library/reserves/">Reserves</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-7" type="checkbox"/><label class="tocitem" for="menuitem-5-7"><span class="docs-label">Branch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Line/">Line</a></li><li><a class="tocitem" href="../../model_library/generated_MonitoredLine/">MonitoredLine</a></li><li><a class="tocitem" href="../../model_library/generated_PhaseShiftingTransformer/">PhaseShiftingTransformer</a></li><li><a class="tocitem" href="../../model_library/generated_TapTransformer/">TapTransformer</a></li><li><a class="tocitem" href="../../model_library/generated_Transformer2W/">Transformer2W</a></li><li><a class="tocitem" href="../../model_library/generated_TwoTerminalHVDCLine/">TwoTerminalHVDCLine</a></li><li><a class="tocitem" href="../../model_library/generated_TwoTerminalVSCDCLine/">TwoTerminalVSCDCLine</a></li><li><a class="tocitem" href="../../model_library/generated_AreaInterchange/">AreaInterchange</a></li><li><a class="tocitem" href="../../model_library/generated_TModelHVDCLine/">TModelHVDCLine</a></li><li><a class="tocitem" href="../../model_library/dynamic_branch/">Dynamic Lines</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-8" type="checkbox"/><label class="tocitem" for="menuitem-5-8"><span class="docs-label">DynamicGeneratorComponent</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_AVR/">AVR</a></li><li><a class="tocitem" href="../../model_library/generated_Machine/">Machine</a></li><li><a class="tocitem" href="../../model_library/generated_PSS/">PSS</a></li><li><a class="tocitem" href="../../model_library/generated_Shaft/">Shaft</a></li><li><a class="tocitem" href="../../model_library/generated_TurbineGov/">TurbineGov</a></li></ul></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../api/public/">Public API</a></li><li><a class="tocitem" href="../../api/glossary/">Glossary and Acronyms</a></li><li><a class="tocitem" href="../../api/type_tree/">Type Tree</a></li><li><a class="tocitem" href="../../api/valuecurve_options/"><code>ValueCurve</code> Options</a></li><li><a class="tocitem" href="../../api/enumerated_types/">Specifying the category of...</a></li><li><a class="tocitem" href="../../api/citation/">Citation</a></li><li><input class="collapse-toggle" id="menuitem-6-7" type="checkbox"/><label class="tocitem" for="menuitem-6-7"><span class="docs-label">Developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/developer_guidelines/">Developer Guidelines</a></li><li><a class="tocitem" href="../../api/internal/">Internals</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to...</a></li><li class="is-active"><a href>...add a market bid</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>...add a market bid</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerSystems.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerSystems.jl/blob/main/docs/src/how_to/market_bid_cost.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Add-a-Market-Bid"><a class="docs-heading-anchor" href="#Add-a-Market-Bid">Add a Market Bid</a><a id="Add-a-Market-Bid-1"></a><a class="docs-heading-anchor-permalink" href="#Add-a-Market-Bid" title="Permalink"></a></h1><p>A <a href="../../model_library/market_bid_cost/#MarketBidCost"><code>MarketBidCost</code></a> is an <code>OperationalCost</code> data structure that allows the user to run a production cost model that is very similar to most US electricity market auctions with bids for energy and ancillary services jointly. This page showcases how to create data for this cost function.</p><h2 id="Adding-a-Single-Incremental-Energy-bids-to-MarketBidCost"><a class="docs-heading-anchor" href="#Adding-a-Single-Incremental-Energy-bids-to-MarketBidCost">Adding a Single Incremental Energy bids to MarketBidCost</a><a id="Adding-a-Single-Incremental-Energy-bids-to-MarketBidCost-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-a-Single-Incremental-Energy-bids-to-MarketBidCost" title="Permalink"></a></h2><h3 id="Construct-directly-the-MarketBidCost-using-the-make_market_bid_curve-method."><a class="docs-heading-anchor" href="#Construct-directly-the-MarketBidCost-using-the-make_market_bid_curve-method.">Construct directly the MarketBidCost using the <code>make_market_bid_curve</code> method.</a><a id="Construct-directly-the-MarketBidCost-using-the-make_market_bid_curve-method.-1"></a><a class="docs-heading-anchor-permalink" href="#Construct-directly-the-MarketBidCost-using-the-make_market_bid_curve-method." title="Permalink"></a></h3><p>The <code>make_market_bid_curve</code> creates an incremental or decremental offer curve from a vector of <code>n</code> power values, a vector of <code>n-1</code> marginal costs and single initial input. For example, the following code creates an incremental offer curve:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerSystems, Dates</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; proposed_offer_curve =
           make_market_bid_curve([0.0, 100.0, 105.0, 120.0, 130.0], [25.0, 26.0, 28.0, 30.0], 10.0)</code><code class="nohighlight hljs ansi" style="display:block;">CostCurve:
  value_curve: PiecewiseIncrementalCurve where initial value is 10.0, derivative function f is: f(x) =
    25.0 for x in [0.0, 100.0)
    26.0 for x in [100.0, 105.0)
    28.0 for x in [105.0, 120.0)
    30.0 for x in [120.0, 130.0)
  power_units: UnitSystem.NATURAL_UNITS = 2
  vom_cost: LinearCurve (a type of InputOutputCurve) where function is: f(x) = 0.0 x + 0.0</code></pre><p>Then a device with MarketBidCost can be directly instantiated using:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerSystems, Dates</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; bus = ACBus(1, &quot;nodeE&quot;, &quot;REF&quot;, 0, 1.0, (min = 0.9, max = 1.05), 230, nothing, nothing)</code><code class="nohighlight hljs ansi" style="display:block;">
ACBus: nodeE:
   number: 1
   name: nodeE
   bustype: ACBusTypes.REF = 3
   angle: 0.0
   magnitude: 1.0
   voltage_limits: (min = 0.9, max = 1.05)
   base_voltage: 230.0
   area: nothing
   load_zone: nothing
   ext: Dict{String, Any}()
   internal: InfrastructureSystems.InfrastructureSystemsInternal
   has_supplemental_attributes: false
   has_time_series: false</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; generator = ThermalStandard(;
           name = &quot;Brighton&quot;,
           available = true,
           status = true,
           bus = bus,
           active_power = 6.0,
           reactive_power = 1.50,
           rating = 0.75,
           prime_mover_type = PrimeMovers.ST,
           fuel = ThermalFuels.COAL,
           active_power_limits = (min = 0.0, max = 6.0),
           reactive_power_limits = (min = -4.50, max = 4.50),
           time_limits = (up = 0.015, down = 0.015),
           ramp_limits = (up = 5.0, down = 3.0),
           operation_cost = MarketBidCost(;
               no_load_cost = 0.0,
               start_up = (hot = 0.0, warm = 0.0, cold = 0.0),
               shut_down = 0.0,
               incremental_offer_curves = proposed_offer_curve,
           ),
           base_power = 100.0,
       )</code><code class="nohighlight hljs ansi" style="display:block;">
ThermalStandard: Brighton:
   name: Brighton
   available: true
   status: true
   bus: ACBus: nodeE
   active_power: 600.0
   reactive_power: 150.0
   rating: 75.0
   active_power_limits: (min = 0.0, max = 600.0)
   reactive_power_limits: (min = -450.0, max = 450.0)
   ramp_limits: (up = 500.0, down = 300.0)
   operation_cost: MarketBidCost composed of incremental_offer_curves: CostCurve{PiecewiseIncrementalCurve}
   base_power: 100.0
   time_limits: (up = 0.015, down = 0.015)
   must_run: false
   prime_mover_type: PrimeMovers.ST = 20
   fuel: ThermalFuels.COAL = 1
   services: 0-element Vector{Service}
   time_at_status: 10000.0
   dynamic_injector: nothing
   ext: Dict{String, Any}()
   internal: InfrastructureSystems.InfrastructureSystemsInternal
   has_supplemental_attributes: false
   has_time_series: false</code></pre><p>Similarly, a decremental offer curve can also be created directly using the same helper method:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerSystems, Dates</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; decremental_offer =
           make_market_bid_curve([0.0, 100.0, 105.0, 120.0, 130.0], [30.0, 28.0, 26.0, 25.0], 50.0)</code><code class="nohighlight hljs ansi" style="display:block;">CostCurve:
  value_curve: PiecewiseIncrementalCurve where initial value is 50.0, derivative function f is: f(x) =
    30.0 for x in [0.0, 100.0)
    28.0 for x in [100.0, 105.0)
    26.0 for x in [105.0, 120.0)
    25.0 for x in [120.0, 130.0)
  power_units: UnitSystem.NATURAL_UNITS = 2
  vom_cost: LinearCurve (a type of InputOutputCurve) where function is: f(x) = 0.0 x + 0.0</code></pre><p>and can be added to a <code>MarketBidCost</code> using the field <code>decremental_offer_curves</code>.</p><h2 id="Adding-Time-Series-Energy-bids-to-MarketBidCost"><a class="docs-heading-anchor" href="#Adding-Time-Series-Energy-bids-to-MarketBidCost">Adding Time Series Energy bids to MarketBidCost</a><a id="Adding-Time-Series-Energy-bids-to-MarketBidCost-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-Time-Series-Energy-bids-to-MarketBidCost" title="Permalink"></a></h2><h3 id="Step-1:-Constructing-device-with-MarketBidCost"><a class="docs-heading-anchor" href="#Step-1:-Constructing-device-with-MarketBidCost">Step 1: Constructing device with MarketBidCost</a><a id="Step-1:-Constructing-device-with-MarketBidCost-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-Constructing-device-with-MarketBidCost" title="Permalink"></a></h3><p>When using <a href="../../model_library/market_bid_cost/#MarketBidCost"><code>MarketBidCost</code></a>, the user can add the cost struct to the device specifying only certain elements, at this point the actual energy cost bids don&#39;t need to be populated/passed.</p><p>The code below shows an example how we can create a thermal device with MarketBidCost.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using PowerSystems, Dates</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; bus = ACBus(1, &quot;nodeE&quot;, &quot;REF&quot;, 0, 1.0, (min = 0.9, max = 1.05), 230, nothing, nothing)</code><code class="nohighlight hljs ansi" style="display:block;">
ACBus: nodeE:
   number: 1
   name: nodeE
   bustype: ACBusTypes.REF = 3
   angle: 0.0
   magnitude: 1.0
   voltage_limits: (min = 0.9, max = 1.05)
   base_voltage: 230.0
   area: nothing
   load_zone: nothing
   ext: Dict{String, Any}()
   internal: InfrastructureSystems.InfrastructureSystemsInternal
   has_supplemental_attributes: false
   has_time_series: false</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; generator = ThermalStandard(;
           name = &quot;Brighton&quot;,
           available = true,
           status = true,
           bus = bus,
           active_power = 6.0,
           reactive_power = 1.50,
           rating = 0.75,
           prime_mover_type = PrimeMovers.ST,
           fuel = ThermalFuels.COAL,
           active_power_limits = (min = 0.0, max = 6.0),
           reactive_power_limits = (min = -4.50, max = 4.50),
           time_limits = (up = 0.015, down = 0.015),
           ramp_limits = (up = 5.0, down = 3.0),
           operation_cost = MarketBidCost(;
               no_load_cost = 0.0,
               start_up = (hot = 0.0, warm = 0.0, cold = 0.0),
               shut_down = 0.0,
           ),
           base_power = 100.0,
       )</code><code class="nohighlight hljs ansi" style="display:block;">
ThermalStandard: Brighton:
   name: Brighton
   available: true
   status: true
   bus: ACBus: nodeE
   active_power: 600.0
   reactive_power: 150.0
   rating: 75.0
   active_power_limits: (min = 0.0, max = 600.0)
   reactive_power_limits: (min = -450.0, max = 450.0)
   ramp_limits: (up = 500.0, down = 300.0)
   operation_cost:
   base_power: 100.0
   time_limits: (up = 0.015, down = 0.015)
   must_run: false
   prime_mover_type: PrimeMovers.ST = 20
   fuel: ThermalFuels.COAL = 1
   services: 0-element Vector{Service}
   time_at_status: 10000.0
   dynamic_injector: nothing
   ext: Dict{String, Any}()
   internal: InfrastructureSystems.InfrastructureSystemsInternal
   has_supplemental_attributes: false
   has_time_series: false</code></pre><h3 id="Step-2:-Creating-the-TimeSeriesData-for-the-Market-Bid"><a class="docs-heading-anchor" href="#Step-2:-Creating-the-TimeSeriesData-for-the-Market-Bid">Step 2: Creating the <code>TimeSeriesData</code> for the Market Bid</a><a id="Step-2:-Creating-the-TimeSeriesData-for-the-Market-Bid-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-Creating-the-TimeSeriesData-for-the-Market-Bid" title="Permalink"></a></h3><p>The user is expected to pass the <code>TimeSeriesData</code> that holds the energy bid data which can be of any type (i.e. <code>SingleTimeSeries</code> or <code>Deterministic</code>) and data must be <code>PiecewiseStepData</code>. This data type is created by specifying a vector of <code>n</code> powers, and <code>n-1</code> marginal costs. The data must be specified in natural units, that is power in MW and marginal cost in /MWh or it will not be accepted when adding to the system. Code below shows an example of how to build a Deterministic TimeSeries.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; initial_time = Dates.DateTime(&quot;2020-01-01&quot;)</code><code class="nohighlight hljs ansi" style="display:block;">2020-01-01T00:00:00</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; psd1 = PiecewiseStepData([5.0, 7.33, 9.67, 12.0], [2.901, 5.8272, 8.941])</code><code class="nohighlight hljs ansi" style="display:block;">PiecewiseStepData representing step (piecewise constant) function f(x) =
  2.901 for x in [5.0, 7.33)
  5.8272 for x in [7.33, 9.67)
  8.941 for x in [9.67, 12.0)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; psd2 = PiecewiseStepData([5.0, 7.33, 9.67, 12.0], [3.001, 6.0072, 9.001])</code><code class="nohighlight hljs ansi" style="display:block;">PiecewiseStepData representing step (piecewise constant) function f(x) =
  3.001 for x in [5.0, 7.33)
  6.0072 for x in [7.33, 9.67)
  9.001 for x in [9.67, 12.0)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; data =
           Dict(
               initial_time =&gt; [
                   psd1,
                   psd2,
               ],
           )</code><code class="nohighlight hljs ansi" style="display:block;">Dict{Dates.DateTime, Vector{PiecewiseStepData}} with 1 entry:
  DateTime(&quot;2020-01-01T00:00:00&quot;) =&gt; [PiecewiseStepData([5.0, 7.33, 9.67, 12.0]…</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; time_series_data = Deterministic(;
           name = &quot;variable_cost&quot;,
           data = data,
           resolution = Dates.Hour(1),
       )</code><code class="nohighlight hljs ansi" style="display:block;">Deterministic(&quot;variable_cost&quot;, DataStructures.SortedDict{Dates.DateTime, Vector{PiecewiseStepData}, Base.Order.ForwardOrdering}(Dates.DateTime(&quot;2020-01-01T00:00:00&quot;) =&gt; [PiecewiseStepData([5.0, 7.33, 9.67, 12.0], [2.901, 5.8272, 8.941]), PiecewiseStepData([5.0, 7.33, 9.67, 12.0], [3.001, 6.0072, 9.001])]), Dates.Hour(1), nothing, InfrastructureSystems.InfrastructureSystemsInternal(Base.UUID(&quot;6f79601a-e4e8-46e2-870b-07531421fc54&quot;), nothing, nothing, nothing))</code></pre><h3 id="Step-3a:-Adding-Energy-Bid-TimeSeriesData-to-the-device"><a class="docs-heading-anchor" href="#Step-3a:-Adding-Energy-Bid-TimeSeriesData-to-the-device">Step 3a: Adding Energy Bid TimeSeriesData to the device</a><a id="Step-3a:-Adding-Energy-Bid-TimeSeriesData-to-the-device-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3a:-Adding-Energy-Bid-TimeSeriesData-to-the-device" title="Permalink"></a></h3><p>To add energy market bids time-series to the <code>MarketBidCost</code>, use <code>set_variable_cost!</code>. The arguments for <code>set_variable_cost!</code> are:</p><ul><li><code>sys::System</code>: PowerSystem System</li><li><code>component::StaticInjection</code>: Static injection device</li><li><code>time_series_data::TimeSeriesData</code>: TimeSeriesData</li><li><code>power_units::UnitSystem</code>: UnitSystem</li></ul><p>Currently, time series data only supports natural units for time series data, i.e. MW for power and /MWh for marginal costs.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; sys = System(100.0, [bus], [generator])</code><code class="nohighlight hljs ansi" style="display:block;"><span class="sgr33"><span class="sgr1">┌ Warning: </span></span>There are no ElectricLoad Components in the System
<span class="sgr33"><span class="sgr1">└ </span></span><span class="sgr90">@ PowerSystems ~/work/PowerSystems.jl/PowerSystems.jl/src/utils/IO/system_checks.jl:59</span>
<span class="sgr1">System
┌───────────────────┬─────────────┐
│ Property          │ Value       │
├───────────────────┼─────────────┤
│ Name              │             │
│ Description       │             │
│ System Units Base │ SYSTEM_BASE │
│ Base Power        │ 100.0       │
│ Base Frequency    │ 60.0        │
│ Num Components    │ 2           │
└───────────────────┴─────────────┘

Static Components
┌─────────────────┬───────┐
│ Type            │ Count │
├─────────────────┼───────┤
│ ACBus           │ 1     │
│ ThermalStandard │ 1     │
└─────────────────┴───────┘</span></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; set_variable_cost!(sys, generator, time_series_data, UnitSystem.NATURAL_UNITS)</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p><strong>Note:</strong> <code>set_variable_cost!</code> add curves to the <code>incremental_offer_curves</code> in the MarketBidCost. Similarly, <code>set_incremental_variable_cost!</code> can be used to add curves to the <code>incremental_offer_curves</code>. On the other hand, <code>set_decremental_variable_cost!</code> must be used to decremental curves (usually for storage or demand). The creation of the TimeSeriesData is similar to Step 2, using <code>PiecewiseStepData</code></p><h3 id="Step-3b:-Adding-Service-Bid-TimeSeriesData-to-the-device"><a class="docs-heading-anchor" href="#Step-3b:-Adding-Service-Bid-TimeSeriesData-to-the-device">Step 3b: Adding Service Bid TimeSeriesData to the device</a><a id="Step-3b:-Adding-Service-Bid-TimeSeriesData-to-the-device-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3b:-Adding-Service-Bid-TimeSeriesData-to-the-device" title="Permalink"></a></h3><p>Similar to adding energy market bids, for adding bids for ancillary services, use <code>set_service_bid!</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; service = VariableReserve{ReserveUp}(&quot;example_reserve&quot;, true, 0.6, 2.0)</code><code class="nohighlight hljs ansi" style="display:block;">
VariableReserve: example_reserve:
   name: example_reserve
   available: true
   time_frame: 0.6
   requirement: 2.0
   sustained_time: 3600.0
   max_output_fraction: 1.0
   max_participation_factor: 1.0
   deployed_fraction: 0.0
   ext: Dict{String, Any}()
   internal: InfrastructureSystems.InfrastructureSystemsInternal
   has_supplemental_attributes: false
   has_time_series: false</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; add_service!(sys, service, get_component(ThermalStandard, sys, &quot;Brighton&quot;))</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; psd3 = PiecewiseStepData([0.0, 10.0], [650.3])</code><code class="nohighlight hljs ansi" style="display:block;">PiecewiseStepData representing step (piecewise constant) function f(x) =
  650.3 for x in [0.0, 10.0)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; psd4 = PiecewiseStepData([0.0, 10.0], [750.0])</code><code class="nohighlight hljs ansi" style="display:block;">PiecewiseStepData representing step (piecewise constant) function f(x) =
  750.0 for x in [0.0, 10.0)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; data = Dict(Dates.DateTime(&quot;2020-01-01&quot;) =&gt; [psd3, psd4])</code><code class="nohighlight hljs ansi" style="display:block;">Dict{Dates.DateTime, Vector{PiecewiseStepData}} with 1 entry:
  DateTime(&quot;2020-01-01T00:00:00&quot;) =&gt; [PiecewiseStepData([0.0, 10.0], [650.3]), …</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; time_series_data = Deterministic(;
           name = get_name(service),
           data = data,
           resolution = Dates.Hour(1),
       )</code><code class="nohighlight hljs ansi" style="display:block;">Deterministic(&quot;example_reserve&quot;, DataStructures.SortedDict{Dates.DateTime, Vector{PiecewiseStepData}, Base.Order.ForwardOrdering}(Dates.DateTime(&quot;2020-01-01T00:00:00&quot;) =&gt; [PiecewiseStepData([0.0, 10.0], [650.3]), PiecewiseStepData([0.0, 10.0], [750.0])]), Dates.Hour(1), nothing, InfrastructureSystems.InfrastructureSystemsInternal(Base.UUID(&quot;2934e19b-24e1-46db-9220-54b9ad16fbd4&quot;), nothing, nothing, nothing))</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; set_service_bid!(sys, generator, service, time_series_data, UnitSystem.NATURAL_UNITS)</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../add_cost_curve/">« ...add an Operating Cost</a><a class="docs-footer-nextpage" href="../adding_additional_fields/">...add additional data to a component »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Saturday 23 November 2024 00:50">Saturday 23 November 2024</span>. Using Julia version 1.11.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
