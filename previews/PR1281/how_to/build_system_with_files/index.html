<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>...build a System using .csv files · PowerSystems.jl</title><meta name="title" content="...build a System using .csv files · PowerSystems.jl"/><meta property="og:title" content="...build a System using .csv files · PowerSystems.jl"/><meta property="twitter:title" content="...build a System using .csv files · PowerSystems.jl"/><meta name="description" content="Documentation for PowerSystems.jl."/><meta property="og:description" content="Documentation for PowerSystems.jl."/><meta property="twitter:description" content="Documentation for PowerSystems.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="PowerSystems.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PowerSystems.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome Page</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/creating_system/">Create and Explore a Power <code>System</code></a></li><li><a class="tocitem" href="../../tutorials/manipulating_datasets/">Manipulating Data Sets</a></li><li><a class="tocitem" href="../../tutorials/working_with_time_series/">Working with Time Series</a></li><li><a class="tocitem" href="../../tutorials/add_dynamic_data/">Adding Data for Dynamic Simulations</a></li></ul></li><li><span class="tocitem">How to...</span><ul><li><a class="tocitem" href="../install/">...install PowerSystems.jl</a></li><li><a class="tocitem" href="../powersystembuilder/">...load a <code>system</code> from <code>PowerSystemCaseBuilder</code></a></li><li><a class="tocitem" href="../parse_matpower_psse/">...parse data from MATPOWER or PSS/e files</a></li><li><a class="tocitem" href="../parse_dynamic_data/">...parse PSS/e dynamic data</a></li><li><a class="tocitem" href="../parse_tabular_data/">...parse tabular data from .csv files</a></li><li><a class="tocitem" href="../parse_ts_from_csvs/">...parse time series data from .csv files</a></li><li><a class="tocitem" href="../add_component_natural_units/">...add a component using natural units (MW)</a></li><li><a class="tocitem" href="../get_buses/">...get all the buses in a system</a></li><li><a class="tocitem" href="../get_available_generators/">...get the available generators in a system</a></li><li><a class="tocitem" href="../add_cost_curve/">...add an Operating Cost</a></li><li><a class="tocitem" href="../market_bid_cost/">...add a market bid</a></li><li><a class="tocitem" href="../adding_additional_fields/">...add additional data to a component</a></li><li><a class="tocitem" href="../add_new_types/">...customize or add a new Type</a></li><li><a class="tocitem" href="../improve_ts_performance/">...improve performance with time series data</a></li><li><a class="tocitem" href="../serialize_data/">...write and read data with a JSON</a></li><li><a class="tocitem" href="../reduce_repl_printing/">...reduce REPL printing</a></li><li><a class="tocitem" href="../migrating_to_psy4/">...migrate from version 3.0 to 4.0</a></li><li class="is-active"><a class="tocitem" href>...build a <code>System</code> using .csv files</a><ul class="internal"><li><a class="tocitem" href="#Prerequisites"><span>Prerequisites</span></a></li><li><a class="tocitem" href="#Build-the-base-of-the-[System](@ref)-with-appropriate-base-power."><span>Build the base of the <code>System</code> with appropriate base power.</span></a></li><li><a class="tocitem" href="#Construct-each-[Area](@ref)-and-[ACBus](@ref)-of-the-[System](@ref)"><span>Construct each <code>Area</code> and <code>ACBus</code> of the <code>System</code></span></a></li><li><a class="tocitem" href="#Build-each-[Branch](@ref)-that-connects-[ACBus](@ref)es"><span>Build each <code>Branch</code> that connects <code>ACBus</code>es</span></a></li><li><a class="tocitem" href="#Building-Thermal-Generators-and-Adding-their-Cost-Functions"><span>Building Thermal Generators and Adding their Cost Functions</span></a></li><li><a class="tocitem" href="#Building-Solar-Generators-and-Adding-their-Time-Series"><span>Building Solar Generators and Adding their Time Series</span></a></li><li><a class="tocitem" href="#Building-Wind-Generators-and-Adding-their-Time-Series"><span>Building Wind Generators and Adding their Time Series</span></a></li><li><a class="tocitem" href="#Building-Hydro-Generators-and-Adding-their-Time-Series"><span>Building Hydro Generators and Adding their Time Series</span></a></li><li><a class="tocitem" href="#Building-[PowerLoad](@ref)-Components-and-Reading-in-Their-Time-Series"><span>Building <code>PowerLoad</code> Components and Reading in Their Time Series</span></a></li></ul></li></ul></li><li><span class="tocitem">Explanation</span><ul><li><a class="tocitem" href="../../explanation/system/">System</a></li><li><a class="tocitem" href="../../explanation/type_structure/">Type Structure</a></li><li><a class="tocitem" href="../../explanation/per_unit/">Per-unit Conventions</a></li><li><a class="tocitem" href="../../explanation/time_series/">Time Series Data</a></li><li><a class="tocitem" href="../../explanation/dynamic_data/">Dynamic Devices</a></li></ul></li><li><span class="tocitem">Model Library</span><ul><li><input class="collapse-toggle" id="menuitem-5-1" type="checkbox"/><label class="tocitem" for="menuitem-5-1"><span class="docs-label">DynamicInverterComponent</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Converter/">Converter</a></li><li><a class="tocitem" href="../../model_library/generated_DCSource/">DCSource</a></li><li><a class="tocitem" href="../../model_library/generated_Filter/">Filter</a></li><li><a class="tocitem" href="../../model_library/generated_FrequencyEstimator/">FrequencyEstimator</a></li><li><a class="tocitem" href="../../model_library/generated_InnerControl/">InnerControl</a></li><li><a class="tocitem" href="../../model_library/generated_OutputCurrentLimiter/">OutputCurrentLimiter</a></li><li><a class="tocitem" href="../../model_library/outer_control/">OuterControl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-2" type="checkbox"/><label class="tocitem" for="menuitem-5-2"><span class="docs-label">StaticInjection</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_FixedAdmittance/">FixedAdmittance</a></li><li><a class="tocitem" href="../../model_library/generated_InterruptiblePowerLoad/">InterruptiblePowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_ExponentialLoad/">ExponentialLoad</a></li><li><a class="tocitem" href="../../model_library/generated_PowerLoad/">PowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_StandardLoad/">StandardLoad</a></li><li><a class="tocitem" href="../../model_library/generated_SwitchedAdmittance/">SwitchedAdmittance</a></li><li><a class="tocitem" href="../../model_library/generated_HydroDispatch/">HydroDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_HydroEnergyReservoir/">HydroEnergyReservoir</a></li><li><a class="tocitem" href="../../model_library/generated_HydroPumpedStorage/">HydroPumpedStorage</a></li><li><a class="tocitem" href="../../model_library/generated_RenewableDispatch/">RenewableDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_RenewableNonDispatch/">RenewableNonDispatch</a></li><li><a class="tocitem" href="../../model_library/generated_ThermalMultiStart/">ThermalMultiStart</a></li><li><a class="tocitem" href="../../model_library/generated_ThermalStandard/">ThermalStandard</a></li><li><a class="tocitem" href="../../model_library/generated_InterconnectingConverter/">InterconnectingConverter</a></li><li><a class="tocitem" href="../../model_library/generated_Source/">Source</a></li><li><a class="tocitem" href="../../model_library/generated_EnergyReservoirStorage/">EnergyReservoirStorage</a></li><li><a class="tocitem" href="../../model_library/hybrid_system/">HybridSystem</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Operating Costs</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/thermal_generation_cost/">ThermalGenerationCost</a></li><li><a class="tocitem" href="../../model_library/hydro_generation_cost/">HydroGenerationCost</a></li><li><a class="tocitem" href="../../model_library/renewable_generation_cost/">RenewableGenerationCost</a></li><li><a class="tocitem" href="../../model_library/storage_cost/">StorageCost</a></li><li><a class="tocitem" href="../../model_library/load_cost/">LoadCost</a></li><li><a class="tocitem" href="../../model_library/market_bid_cost/">MarketBidCost</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-4" type="checkbox"/><label class="tocitem" for="menuitem-5-4"><span class="docs-label">Topology</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Area/">Area</a></li><li><a class="tocitem" href="../../model_library/generated_LoadZone/">LoadZone</a></li><li><a class="tocitem" href="../../model_library/generated_Arc/">Arc</a></li><li><a class="tocitem" href="../../model_library/generated_ACBus/">ACBus</a></li><li><a class="tocitem" href="../../model_library/generated_DCBus/">DCBus</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-5" type="checkbox"/><label class="tocitem" for="menuitem-5-5"><span class="docs-label">DynamicInjection</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_ActiveConstantPowerLoad/">ActiveConstantPowerLoad</a></li><li><a class="tocitem" href="../../model_library/generated_AggregateDistributedGenerationA/">AggregateDistributedGenerationA</a></li><li><a class="tocitem" href="../../model_library/generated_CSVGN1/">CSVGN1</a></li><li><a class="tocitem" href="../../model_library/generated_DynamicExponentialLoad/">DynamicExponentialLoad</a></li><li><a class="tocitem" href="../../model_library/generated_GenericDER/">GenericDER</a></li><li><a class="tocitem" href="../../model_library/generated_PeriodicVariableSource/">PeriodicVariableSource</a></li><li><a class="tocitem" href="../../model_library/generated_SimplifiedSingleCageInductionMachine/">SimplifiedSingleCageInductionMachine</a></li><li><a class="tocitem" href="../../model_library/generated_SingleCageInductionMachine/">SingleCageInductionMachine</a></li><li><a class="tocitem" href="../../model_library/dynamic_inverter/">Dynamic Inverter</a></li><li><a class="tocitem" href="../../model_library/dynamic_generator/">Dynamic Generator</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-6" type="checkbox"/><label class="tocitem" for="menuitem-5-6"><span class="docs-label">Service</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_AGC/">AGC</a></li><li><a class="tocitem" href="../../model_library/generated_ConstantReserveNonSpinning/">ConstantReserveNonSpinning</a></li><li><a class="tocitem" href="../../model_library/generated_VariableReserveNonSpinning/">VariableReserveNonSpinning</a></li><li><a class="tocitem" href="../../model_library/generated_TransmissionInterface/">TransmissionInterface</a></li><li><a class="tocitem" href="../../model_library/reserves/">Reserves</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-7" type="checkbox"/><label class="tocitem" for="menuitem-5-7"><span class="docs-label">Branch</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_Line/">Line</a></li><li><a class="tocitem" href="../../model_library/generated_MonitoredLine/">MonitoredLine</a></li><li><a class="tocitem" href="../../model_library/generated_PhaseShiftingTransformer/">PhaseShiftingTransformer</a></li><li><a class="tocitem" href="../../model_library/generated_TapTransformer/">TapTransformer</a></li><li><a class="tocitem" href="../../model_library/generated_Transformer2W/">Transformer2W</a></li><li><a class="tocitem" href="../../model_library/generated_TwoTerminalHVDCLine/">TwoTerminalHVDCLine</a></li><li><a class="tocitem" href="../../model_library/generated_TwoTerminalVSCDCLine/">TwoTerminalVSCDCLine</a></li><li><a class="tocitem" href="../../model_library/generated_AreaInterchange/">AreaInterchange</a></li><li><a class="tocitem" href="../../model_library/generated_TModelHVDCLine/">TModelHVDCLine</a></li><li><a class="tocitem" href="../../model_library/dynamic_branch/">Dynamic Lines</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-8" type="checkbox"/><label class="tocitem" for="menuitem-5-8"><span class="docs-label">DynamicGeneratorComponent</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../model_library/generated_AVR/">AVR</a></li><li><a class="tocitem" href="../../model_library/generated_Machine/">Machine</a></li><li><a class="tocitem" href="../../model_library/generated_PSS/">PSS</a></li><li><a class="tocitem" href="../../model_library/generated_Shaft/">Shaft</a></li><li><a class="tocitem" href="../../model_library/generated_TurbineGov/">TurbineGov</a></li></ul></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../api/public/">Public API</a></li><li><a class="tocitem" href="../../api/glossary/">Glossary and Acronyms</a></li><li><a class="tocitem" href="../../api/type_tree/">Type Tree</a></li><li><a class="tocitem" href="../../api/valuecurve_options/"><code>ValueCurve</code> Options</a></li><li><a class="tocitem" href="../../api/enumerated_types/">Specifying the category of...</a></li><li><a class="tocitem" href="../../api/citation/">Citation</a></li><li><input class="collapse-toggle" id="menuitem-6-7" type="checkbox"/><label class="tocitem" for="menuitem-6-7"><span class="docs-label">Developers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/developer_guidelines/">Developer Guidelines</a></li><li><a class="tocitem" href="../../api/internal/">Internals</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to...</a></li><li class="is-active"><a href>...build a <code>System</code> using .csv files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>...build a <code>System</code> using .csv files</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerSystems.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NREL-Sienna/PowerSystems.jl/blob/main/docs/src/how_to/build_system_with_files.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="system_from_csv"><a class="docs-heading-anchor" href="#system_from_csv">Building a System from CSV Files</a><a id="system_from_csv-1"></a><a class="docs-heading-anchor-permalink" href="#system_from_csv" title="Permalink"></a></h1><h2 id="Prerequisites"><a class="docs-heading-anchor" href="#Prerequisites">Prerequisites</a><a id="Prerequisites-1"></a><a class="docs-heading-anchor-permalink" href="#Prerequisites" title="Permalink"></a></h2><p>In this example, we show how to build a <a href="../../api/public/#System"><code>System</code></a>, assuming you have input data on the component specifications and time series data formatted in CSV files. Moreover, it is assumed that the CSV files are stored in a directory called <code>MyData</code>. These formatting expectations are more clearly specified in the following sections of this how-to, where the components and time series are built.</p><p>These are the depedencies needed for this how-to:</p><pre><code class="language-julia hljs">using PowerSystems
using InfrastructureSystems
using CSV
using DataFrames
using Dates
using TimeSeries</code></pre><h2 id="Build-the-base-of-the-[System](@ref)-with-appropriate-base-power."><a class="docs-heading-anchor" href="#Build-the-base-of-the-[System](@ref)-with-appropriate-base-power.">Build the base of the <a href="../../api/public/#System"><code>System</code></a> with appropriate base power.</a><a id="Build-the-base-of-the-[System](@ref)-with-appropriate-base-power.-1"></a><a class="docs-heading-anchor-permalink" href="#Build-the-base-of-the-[System](@ref)-with-appropriate-base-power." title="Permalink"></a></h2><p>Begin by building the base <a href="../../api/public/#System"><code>System</code></a> using the base power.</p><pre><code class="language-julia hljs">system_base_mva = 100.0
sys = System(system_base_mva)</code></pre><h2 id="Construct-each-[Area](@ref)-and-[ACBus](@ref)-of-the-[System](@ref)"><a class="docs-heading-anchor" href="#Construct-each-[Area](@ref)-and-[ACBus](@ref)-of-the-[System](@ref)">Construct each <a href="../../model_library/generated_Area/#Area"><code>Area</code></a> and <a href="../../model_library/generated_ACBus/#ACBus"><code>ACBus</code></a> of the <a href="../../api/public/#System"><code>System</code></a></a><a id="Construct-each-[Area](@ref)-and-[ACBus](@ref)-of-the-[System](@ref)-1"></a><a class="docs-heading-anchor-permalink" href="#Construct-each-[Area](@ref)-and-[ACBus](@ref)-of-the-[System](@ref)" title="Permalink"></a></h2><p>The first building block of a system are the buses. In this example, we assume that the component data for the buses are contained in a CSV file. Each row is an individual bus, and there is a column for each input parameter:</p><table><tr><th style="text-align: right">Bus Number</th><th style="text-align: right">BusType</th><th style="text-align: right">Magnitude</th><th style="text-align: right">Voltage-Max</th><th style="text-align: right">Voltage-Min</th><th style="text-align: right">Base Voltage</th><th style="text-align: right">Region</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">AC</td><td style="text-align: right">1</td><td style="text-align: right">1.06</td><td style="text-align: right">0.94</td><td style="text-align: right">138</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">AC</td><td style="text-align: right">1</td><td style="text-align: right">1.06</td><td style="text-align: right">0.94</td><td style="text-align: right">138</td><td style="text-align: right">1</td></tr><tr><td style="text-align: right">3</td><td style="text-align: right">AC</td><td style="text-align: right">1</td><td style="text-align: right">1.06</td><td style="text-align: right">0.94</td><td style="text-align: right">345</td><td style="text-align: right">2</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Ensure your data follows this format before beginning.</p><p>Read in the contents of the CSV file <code>Buses.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">bus_params = CSV.read(&quot;MyData/Buses.csv&quot;, DataFrame)

min_voltage_col = &quot;Voltage-Min&quot;
max_voltage_col = &quot;Voltage-Max&quot;
base_voltage_col = &quot;Base Voltage&quot;
bus_number_col = &quot;Number&quot;
region = &quot;Region&quot;</code></pre><p>In this example, we assume that the buses are sorted into three [<code>Area</code>]s, where <code>area</code> is an optional parameter in the [<code>ACBus</code>] constructor. Because we will be sorting our buses into these areas as we construct the buses, we must first attach the areas to our [<code>System</code>].</p><pre><code class="language-julia hljs">num_regions = 3

for i in 1:num_regions
    area = Area(&quot;R$i&quot;)
    add_component!(sys, area)
end</code></pre><p>Now, we are ready to build the buses using the <a href="../../model_library/generated_ACBus/#ACBus"><code>ACBus</code></a> constructor. If the input data you have available in your <code>Buses.csv</code> file does not include all the required parameters of <a href="../../model_library/generated_ACBus/#ACBus"><code>ACBus</code></a>, you can hard code in the necessary data in the <code>for</code> loop. We have done that here for e.g., the <a href="../../api/enumerated_types/#acbustypes_list"><code>bustype</code></a> and <code>angle</code>.</p><pre><code class="language-julia hljs">for row in eachrow(bus_params)
    num = row[bus_number_col]
    min_volt = row[min_voltage_col]
    max_volt = row[max_voltage_col]
    base_volt = row[base_voltage_col]
    bus = ACBus(;
        number = num,
        name = &quot;bus$num&quot;,
        bustype = ACBusTypes.PQ,
        angle = 0.0,
        magnitude = 1.0,
        voltage_limits = (min = min_volt, max = max_volt),
        base_voltage = base_volt,
        area = get_component(Area, sys, &quot;R$(row[region])&quot;)
    )
    add_component!(sys, bus)
end</code></pre><h2 id="Build-each-[Branch](@ref)-that-connects-[ACBus](@ref)es"><a class="docs-heading-anchor" href="#Build-each-[Branch](@ref)-that-connects-[ACBus](@ref)es">Build each <a href="../../api/public/#PowerSystems.Branch"><code>Branch</code></a> that connects <a href="../../model_library/generated_ACBus/#ACBus"><code>ACBus</code></a>es</a><a id="Build-each-[Branch](@ref)-that-connects-[ACBus](@ref)es-1"></a><a class="docs-heading-anchor-permalink" href="#Build-each-[Branch](@ref)-that-connects-[ACBus](@ref)es" title="Permalink"></a></h2><p>The next step is to build the <a href="../../api/public/#PowerSystems.Branch"><code>Branch</code></a>es in the system. In this example, we only have two branch types: a <a href="../../model_library/generated_Line/#Line"><code>Line</code></a>, if the connecting buses have the same base voltage; and a <a href="../../model_library/generated_Transformer2W/#Transformer2W"><code>Transformer2W</code></a> if they have different base voltages. You may need to implement additional logic if you have other branch types as well.</p><p>The data for each <a href="../../api/public/#PowerSystems.Branch"><code>Branch</code></a> is contained in <code>Branches.csv</code> with the following format that your data should follow as well. Each row is a branch, and each column represents an input parameter.</p><table><tr><th style="text-align: right">Branch Number</th><th style="text-align: right">Bus from</th><th style="text-align: right">Bus to</th><th style="text-align: right">Reactance</th><th style="text-align: right">Resistance</th><th style="text-align: right">Max Flow (MW)</th><th style="text-align: right">Min Flow (MW)</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">2</td><td style="text-align: right">0.0999</td><td style="text-align: right">0.0303</td><td style="text-align: right">600</td><td style="text-align: right">-600</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">1</td><td style="text-align: right">3</td><td style="text-align: right">0.0424</td><td style="text-align: right">0.0129</td><td style="text-align: right">600</td><td style="text-align: right">-600</td></tr><tr><td style="text-align: right">3</td><td style="text-align: right">4</td><td style="text-align: right">5</td><td style="text-align: right">0.00798</td><td style="text-align: right">0.00176</td><td style="text-align: right">1700</td><td style="text-align: right">-1700</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Read in the contents of the CSV file <code>Branches.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">branch_params = CSV.read(&quot;MyData/Branches.csv&quot;, DataFrame)

branch_num = &quot;Branch Number&quot;
bus_from_col = &quot;Bus from&quot;
bus_to_col = &quot;Bus to&quot;
reactance = &quot;Reactance (p.u.)&quot;
resistance = &quot;Resistance (p.u.)&quot;
max_flow = &quot;Max Flow (MW)&quot;</code></pre><p>Build the lines and transformers using the <a href="../../model_library/generated_Line/#Line"><code>Line</code></a> and <a href="../../model_library/generated_Transformer2W/#Transformer2W"><code>Transformer2W</code></a> constructors.  Again, if you don&#39;t have all of these parameters available in your file, customize the <code>for</code> loop to hard code whatever parameters you are missing (in this example, <code>active_power_flow</code>, <code>reactive_power_flow</code>, and <code>primary_shunt</code> are not specified in our <code>Branches.csv</code> file).</p><pre><code class="language-julia hljs">for row in eachrow(branch_params)
    num = row[branch_num]
    bus_from = row[bus_from_col]
    bus_to = row[bus_to_col]
    if bus_params[bus_to, base_voltage_col] == bus_params[bus_from, base_voltage_col]
        local line = Line(;
            name = &quot;line$num&quot;,
            available = true,
            active_power_flow = 0.0,
            reactive_power_flow = 0.0,
            arc = Arc(; from = get_bus(sys, bus_from), to = get_bus(sys, bus_to)),
            r = row[resistance],
            x = row[reactance],
            b = (from = 0.0, to = 0.0),
            rating = row[max_flow] / system_base_mva,
            angle_limits = (min = 0.0, max = 0.0),
        )
        add_component!(sys, line)
    else # if the base voltages of the connecting buses do not match build a transformer
        local tline = Transformer2W(;
            name = &quot;tline$num&quot;,
            available = true,
            active_power_flow = 0.0,
            reactive_power_flow = 0.0,
            arc = Arc(; from = get_bus(sys, bus_from), to = get_bus(sys, bus_to)),
            r = row[resistance],
            x = row[reactance],
            primary_shunt = 0.0,
            rating = row[max_flow] / system_base_mva,
        )
        add_component!(sys, tline)
    end
end</code></pre><h2 id="Building-Thermal-Generators-and-Adding-their-Cost-Functions"><a class="docs-heading-anchor" href="#Building-Thermal-Generators-and-Adding-their-Cost-Functions">Building Thermal Generators and Adding their Cost Functions</a><a id="Building-Thermal-Generators-and-Adding-their-Cost-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Building-Thermal-Generators-and-Adding-their-Cost-Functions" title="Permalink"></a></h2><h3 id="Build-Thermal-Generators"><a class="docs-heading-anchor" href="#Build-Thermal-Generators">Build Thermal Generators</a><a id="Build-Thermal-Generators-1"></a><a class="docs-heading-anchor-permalink" href="#Build-Thermal-Generators" title="Permalink"></a></h3><p>The data needed to build each <a href="../../model_library/generated_ThermalStandard/#ThermalStandard"><code>ThermalStandard</code></a> unit is found in the CSV file <code>Thermal_Gens.csv</code>, with a row for each generator, and columns for the generators&#39; input parameters. The following table is a snapshot of the first 6 columns of our <code>Thermal_Gens.csv</code>:</p><table><tr><th style="text-align: right">Gen Name</th><th style="text-align: right">Bus</th><th style="text-align: right">Rating</th><th style="text-align: right">Min Stable Level (MW)</th><th style="text-align: right">Max Capacity (MW)</th><th style="text-align: right">Max Ramp Up (MW/min)</th><th style="text-align: right">...</th></tr><tr><td style="text-align: right">Biomass 01</td><td style="text-align: right">12</td><td style="text-align: right">3</td><td style="text-align: right">0.9</td><td style="text-align: right">3.0</td><td style="text-align: right">0.42</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">Biomass 02</td><td style="text-align: right">12</td><td style="text-align: right">3</td><td style="text-align: right">0.9</td><td style="text-align: right">3.0</td><td style="text-align: right">0.42</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">Biomass 03</td><td style="text-align: right">103</td><td style="text-align: right">1.2</td><td style="text-align: right">0.36</td><td style="text-align: right">1.2</td><td style="text-align: right">0.42</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Read in the contents of the CSV file <code>Thermal_Gens.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">thermal_gens =  CSV.read(&quot;MyData/Thermal_Gens.csv&quot;, DataFrame)

name = &quot;Gen Name&quot;
bus_connection = &quot;Bus&quot;
rate = &quot;Rating&quot;
min_active_power = &quot;Min Stable Level (MW)&quot;
max_active_power = &quot;Max Capacity (MW)&quot;
ramp_up = &quot;Max Ramp Up (MW/min)&quot;
ramp_down = &quot;Max Ramp Down (MW/min)&quot;
min_up = &quot;Min Up Time (h)&quot;
min_down = &quot;Min Down Time (h)&quot;
prime_move = &quot;PrimeMoveType&quot;
fuel = &quot;Fuel Type&quot;</code></pre><p>Build the thermal generator components using the <a href="../../model_library/generated_ThermalStandard/#ThermalStandard"><code>ThermalStandard</code></a> constructor and data stored in the <code>thermal_gens</code> dataframe:</p><pre><code class="language-julia hljs">for row in eachrow(thermal_gens)
    local thermal = ThermalStandard(;
        name = row[name],
        available = true,
        status = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        rating = row[rate],
        active_power_limits = (
            min = row[min_active_power],
            max = row[max_active_power],
        ),
        reactive_power_limits = (min = 0.0, max = 0.0),
        ramp_limits = (up = row[ramp_up], down = row[ramp_down]),
        operation_cost = ThermalGenerationCost(nothing),
        base_power = system_base_mva,
        time_limits = (up = row[min_up], down = row[min_down]),
        prime_mover_type = row[prime_move],
        fuel = row[fuel],
    )
    add_component!(sys, thermal)
end</code></pre><h3 id="Add-[ThermalGenerationCost](@ref)"><a class="docs-heading-anchor" href="#Add-[ThermalGenerationCost](@ref)">Add <a href="../../model_library/thermal_generation_cost/#ThermalGenerationCost"><code>ThermalGenerationCost</code></a></a><a id="Add-[ThermalGenerationCost](@ref)-1"></a><a class="docs-heading-anchor-permalink" href="#Add-[ThermalGenerationCost](@ref)" title="Permalink"></a></h3><p>Thermal generator cost is defined by <a href="../../api/public/#InfrastructureSystems.FuelCurve"><code>FuelCurve</code></a>. The data needed to populate each <a href="../../api/public/#InfrastructureSystems.FuelCurve"><code>FuelCurve</code></a> is in the CSV file <code>Thermal_Fuel_Rates.csv</code>. This CSV file requires some parsing in order to more easily set the fuel cost for each thermal unit.</p><p>Read in the contents of the CSV file <code>Thermal_Fuel_Rates.csv</code> to a data frame, and create a dictionary of fuel types and costs.</p><pre><code class="language-julia hljs">fuel_params = CSV.read(&quot;MyData/Thermal_Fuels_Rates.csv&quot;, DataFrame)

fuel_cost = Dict(
    &quot;coal&quot; =&gt; fuel_params[1, 2],
    &quot;ng&quot; =&gt; fuel_params[2, 2],
    &quot;oil&quot; =&gt; fuel_params[3, 2],
    &quot;bio&quot; =&gt; fuel_params[4, 2],
    &quot;geo&quot; =&gt; fuel_params[5, 2],
)</code></pre><p>Assign a fuel type and price to the thermal generators based on their name.</p><pre><code class="language-julia hljs">fuel_prices = []
fuel = []
for row in eachrow(thermal_gens)
    if row[prime_move] == &quot;OT&quot;
        push!(fuel_prices, bm_price)
        push!(fuel, ThermalFuels.AG_BIPRODUCT)
    elseif row[name] == &quot;CC&quot; || startswith(row[name], &quot;CT NG&quot;) ||
           startswith(row[name], &quot;ICE NG&quot;) || startswith(row[name], &quot;ST NG&quot;)
        push!(fuel_prices, ng_price)
        push!(fuel, ThermalFuels.NATURAL_GAS)
    elseif startswith(row[name], &quot;CT Oil&quot;)
        push!(fuel_prices, oil_price)
        push!(fuel, ThermalFuels.DISTILLATE_FUEL_OIL)
    elseif startswith(row[name], &quot;ST Coal&quot;)
        push!(fuel_prices, coal_price)
        push!(fuel, ThermalFuels.COAL)
    elseif startswith(row[name], &quot;Geo&quot;)
        push!(fuel_prices, geo_price)
        push!(fuel, ThermalFuels.GEOTHERMAL)
    elseif startswith(row[name], &quot;ST Other 01&quot;)
        push!(fuel_prices, oil_price)
        push!(fuel, ThermalFuels.DISTILLATE_FUEL_OIL)
    elseif startswith(row[name], &quot;ST Other 02&quot;)
        push!(fuel_prices, ng_price)
        push!(fuel, ThermalFuels.NATURAL_GAS)
    end
end</code></pre><p>Next, we will parse heat rates, load points and heat rate bases. Heat rates, load points, and heat rate bases are used to construct <a href="../../api/public/#InfrastructureSystems.LinearCurve"><code>LinearCurve</code></a> and <a href="../../api/public/#InfrastructureSystems.PiecewiseIncrementalCurve"><code>PiecewiseIncrementalCurve</code></a> that describe the operational cost of the thermal units.</p><pre><code class="language-julia hljs">heat_rate_base = thermal_gens[:, &quot;Heat Rate Base (MMBTU/hr)&quot;]
heat_rate = thermal_gens[:, &quot;Heat Rate (MMBTU/hr)&quot;]
load_point = thermal_gens[:, &quot;Load Point Band (MW)&quot;]
fixed_cost = thermal_gens[:, &quot;Fixed Cost&quot;]
start_up_cost = thermal_gens[:, &quot;Start Up Cost&quot;]
shut_down_cost = thermal_gens[:, &quot;Shut Down Cost&quot;]</code></pre><p>Use the heat rate bases, heat rates, load points and fuel costs to construct the thermal generation cost functions using the <a href="../../api/public/#InfrastructureSystems.FuelCurve"><code>FuelCurve</code></a> and <a href="../../api/public/#InfrastructureSystems.PiecewiseIncrementalCurve"><code>PiecewiseIncrementalCurve</code></a> functions.</p><pre><code class="language-julia hljs">gen_name = &quot;Generator Name&quot;

for row in eachrow(thermal_gens)
    thermal = get_component(ThermalStandard, sys, row[gen_name])
    fuel_cost = row[fuel_prices]
    heat_rate_base = row[heat_rate_base]
    heat_rate = row[heat_rate]
    load_point = row[load_point]
    heat_rate_curve =
        PieceWiseIncrementalCurve(heat_rate_base, load_point, heat_rate)
    fuel_curve =
        FuelCurve(; value_curve = heat_rate_curve, fuel_cost = fuel_prices[rownumber(row)])
    cost_thermal = ThermalGenerationCost(;
        variable = fuel_curve,
        fixed = row[fixed_cost],
        start_up = row[start_up_cost],
        shut_down = row[shut_down_cost],
    )
    set_operation_cost!(thermal, cost_thermal)
end</code></pre><p>For more information regarding thermal cost functions please visit <a href="../../model_library/thermal_generation_cost/#ThermalGenerationCost"><code>ThermalGenerationCost</code></a>.</p><h2 id="Building-Solar-Generators-and-Adding-their-Time-Series"><a class="docs-heading-anchor" href="#Building-Solar-Generators-and-Adding-their-Time-Series">Building Solar Generators and Adding their Time Series</a><a id="Building-Solar-Generators-and-Adding-their-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Building-Solar-Generators-and-Adding-their-Time-Series" title="Permalink"></a></h2><p>The data needed to build each solar powered <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a> unit is found in the CSV file <code>Solar_Gens.csv</code>, with a row for each generator, and columns for the generators&#39; input parameters. The following table is a snapshot of the first 3 rows of our <code>Solar_Gens.csv</code>:</p><table><tr><th style="text-align: right">Gen Name</th><th style="text-align: right">Number</th><th style="text-align: right">Bus</th><th style="text-align: right">Rating</th></tr><tr><td style="text-align: right">Solar 01</td><td style="text-align: right">1</td><td style="text-align: right">32</td><td style="text-align: right">746.76</td></tr><tr><td style="text-align: right">Solar 02</td><td style="text-align: right">2</td><td style="text-align: right">92</td><td style="text-align: right">369.26</td></tr><tr><td style="text-align: right">Solar 03</td><td style="text-align: right">3</td><td style="text-align: right">54</td><td style="text-align: right">264.47</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Read in the contents of the CSV file <code>Solar_Gens.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">solar_gens =  CSV.read(&quot;MyData/Solar_Gens.csv&quot;, DataFrame)

name = &quot;Gen Name&quot;
num = &quot;Number&quot;
bus_connection = &quot;Bus&quot;
rate = &quot;Rating&quot;</code></pre><p>Before building the solar generators, we must also set up the solar generators&#39; time series. In this example, we assume that each solar generator has a unique time series, and all of these time series are contained in one file: <code>MyData/Solar_Time_Series.csv</code>.  Here is a snapshot of this time series CSV file, where the first column contains time stamps, and the remaining columns contain the time series values for each solar generator:</p><table><tr><th style="text-align: right">Time Stamp</th><th style="text-align: right">Value - Solar 1</th><th style="text-align: right">Value - Solar 2</th><th style="text-align: right">Value - Solar 3</th><th style="text-align: right">...</th></tr><tr><td style="text-align: right">1/1/23 0:00</td><td style="text-align: right">0.0</td><td style="text-align: right">0.0</td><td style="text-align: right">0.0</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">1/1/23 1:00</td><td style="text-align: right">0.0</td><td style="text-align: right">0.0</td><td style="text-align: right">0.0</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">1/1/23 2:00</td><td style="text-align: right">0.0</td><td style="text-align: right">0.0</td><td style="text-align: right">0.0</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Each time series for its respective solar generator has an hourly resolution, and is for the year 2023, plus one full day into 2024, for a total of 366 days, and 8784 values per column. Ensure that your time series file is similarly formatted.</p><p>Create a data frame from <code>Solar_Time_Series.csv</code> and define variables for the aforementioned resolution and time stamps:</p><pre><code class="language-julia hljs">solar_time_series = CSV.read(&quot;MyData/Solar_Time_Series.csv&quot;, DataFrame)

resolution = Dates.Hour(1);
timestamps = range(DateTime(&quot;2023-01-01T00:00:00&quot;); step = resolution, length = 8784);</code></pre><p>In the same <code>for</code> loop, we will build the solar generator components using the <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a> constructor and data stored in the <code>solar_gens</code> dataframe, and build and attach each solar generator&#39;s time series. In this example, we assume that the <a href="../../model_library/renewable_generation_cost/#RenewableGenerationCost"><code>RenewableGenerationCost</code></a> is at zero marginal cost.</p><pre><code class="language-julia hljs">for row in eachrow(solar_gens)
    norm = maximum(solar_time_series[:, row[num] + 1]) # plus 1 is to skip the timestamp column
    solar_array = TimeArray(timestamps, (solar_time_series[:, row[num] + 1] ./ norm) / system_base_mva) # normalize and per-unitize data
    solar_TS = SingleTimeSeries(;
        name = &quot;max_active_power&quot;,
        data = solar_array,
        scaling_factor_multiplier = get_max_active_power,
    )
    local solar = RenewableDispatch(;
        name = row[name],
        available = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        rating = row[rate],
        prime_mover_type = PrimeMovers.PVe,
        reactive_power_limits = (min = 0.0, max = 0.0),
        power_factor = 1.0,
        operation_cost = RenewableGenerationCost(zero(CostCurve)),
        base_power = system_base_mva,
    )
    add_component!(sys, solar)
    add_time_series!(sys, solar, solar_TS)
end</code></pre><h2 id="Building-Wind-Generators-and-Adding-their-Time-Series"><a class="docs-heading-anchor" href="#Building-Wind-Generators-and-Adding-their-Time-Series">Building Wind Generators and Adding their Time Series</a><a id="Building-Wind-Generators-and-Adding-their-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Building-Wind-Generators-and-Adding-their-Time-Series" title="Permalink"></a></h2><p>The data needed to build each wind powered <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a> unit is found in the CSV file <code>Wind_Gens.csv</code>, with a row for each generator, and columns for the generators&#39; input parameters. The following table is a snapshot of the first 3 rows of our <code>Wind_Gens.csv</code>:</p><table><tr><th style="text-align: right">Gen Name</th><th style="text-align: right">Number</th><th style="text-align: right">Bus</th><th style="text-align: right">Rating</th></tr><tr><td style="text-align: right">Wind 01</td><td style="text-align: right">1</td><td style="text-align: right">24</td><td style="text-align: right">11.5</td></tr><tr><td style="text-align: right">Wind 02</td><td style="text-align: right">2</td><td style="text-align: right">24</td><td style="text-align: right">38.0</td></tr><tr><td style="text-align: right">Wind 03</td><td style="text-align: right">3</td><td style="text-align: right">24</td><td style="text-align: right">10.0</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Read in the contents of the CSV file <code>Wind_Gens.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">wind_gens =  CSV.read(&quot;MyData/Wind_Gens.csv&quot;, DataFrame)

name = &quot;Gen Name&quot;
num = &quot;Number&quot;
bus_connection = &quot;Bus&quot;
rate = &quot;Rating&quot;</code></pre><p>Before building the wind generators, we must also set up the wind generators&#39; time series. In this example, we assume that each wind generator has a unique time series, and all of these time series are contained in one file: <code>MyData/Wind_Time_Series.csv</code>.  Here is a snapshot of this time series CSV file, where the first column contains time stamps, and the remaining columns contain the time series values for each wind generator:</p><table><tr><th style="text-align: right">Time Stamp</th><th style="text-align: right">Value - Wind 1</th><th style="text-align: right">Value - Wind 2</th><th style="text-align: right">Value - Wind 3</th><th style="text-align: right">...</th></tr><tr><td style="text-align: right">1/1/23 0:00</td><td style="text-align: right">0.45813515</td><td style="text-align: right">3.72427362</td><td style="text-align: right">2.47726658</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">1/1/23 1:00</td><td style="text-align: right">0.90083454</td><td style="text-align: right">8.09024454</td><td style="text-align: right">3.03120437</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">1/1/23 2:00</td><td style="text-align: right">2.41245919</td><td style="text-align: right">13.3355967</td><td style="text-align: right">3.08938011</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Each time series for its respective wind generator has an hourly resolution, and is for the year 2023, plus one full day into 2024, for a total of 366 days, and 8784 values per column. Ensure that your time series file is similarly formatted.</p><p>Create a data frame from <code>Wind_Time_Series.csv</code> and define variables for the aforementioned resolution and time stamps:</p><pre><code class="language-julia hljs">wind_time_series = CSV.read(&quot;MyData/Wind_Time_Series.csv&quot;, DataFrame)

resolution = Dates.Hour(1);
timestamps = range(DateTime(&quot;2023-01-01T00:00:00&quot;); step = resolution, length = 8784);</code></pre><p>In the same <code>for</code> loop, we will build the wind generator components using the <a href="../../model_library/generated_RenewableDispatch/#RenewableDispatch"><code>RenewableDispatch</code></a> constructor and data stored in the <code>wind_gens</code> dataframe, and build and attach each wind generator&#39;s time series. In this example, we assume that the <a href="../../model_library/renewable_generation_cost/#RenewableGenerationCost"><code>RenewableGenerationCost</code></a> is at zero marginal cost.</p><pre><code class="language-julia hljs">for row in eachrow(wind_gens)
    norm = maximum(wind_time_series[:, row[num] + 1]) # plus 1 is to skip the timestamp column
    wind_array = TimeArray(timestamps, (wind_time_series[:, row[num] + 1] ./ norm) / system_base_mva) # normalize and per-unitize data
    wind_TS = SingleTimeSeries(;
        name = &quot;max_active_power&quot;,
        data = wind_array,
        scaling_factor_multiplier = get_max_active_power,
    )
    local wind = RenewableDispatch(;
        name = row[name],
        available = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        rating = row[rate],
        prime_mover_type = PrimeMovers.WT,
        reactive_power_limits = (min = 0.0, max = 0.0),
        power_factor = 1.0,
        operation_cost = RenewableGenerationCost(zero(CostCurve)),
        base_power = system_base_mva,
    )
    add_component!(sys, wind)
    add_time_series!(sys, wind, wind_TS)
end</code></pre><h2 id="Building-Hydro-Generators-and-Adding-their-Time-Series"><a class="docs-heading-anchor" href="#Building-Hydro-Generators-and-Adding-their-Time-Series">Building Hydro Generators and Adding their Time Series</a><a id="Building-Hydro-Generators-and-Adding-their-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Building-Hydro-Generators-and-Adding-their-Time-Series" title="Permalink"></a></h2><p>The data needed to build each <a href="../../model_library/generated_HydroDispatch/#HydroDispatch"><code>HydroDispatch</code></a> unit is found in the CSV file <code>Hydro_Gens.csv</code>, with a row for each generator, and columns for the generators&#39; input parameters. The following table is a snapshot of the first 5 columns of our <code>Hydro_Gens.csv</code>:</p><table><tr><th style="text-align: right">Gen Name</th><th style="text-align: right">Number</th><th style="text-align: right">Bus</th><th style="text-align: right">Min Stable Level (MW)</th><th style="text-align: right">Max Capacity (MW)</th><th style="text-align: right">Max Ramp Up (MW/min)</th><th style="text-align: right">...</th></tr><tr><td style="text-align: right">Hydro 01</td><td style="text-align: right">1</td><td style="text-align: right">56</td><td style="text-align: right">0.0</td><td style="text-align: right">75.0</td><td style="text-align: right">0.83</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">Hydro 02</td><td style="text-align: right">2</td><td style="text-align: right">56</td><td style="text-align: right">0.0</td><td style="text-align: right">75.0</td><td style="text-align: right">0.83</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">Hydro 03</td><td style="text-align: right">3</td><td style="text-align: right">66</td><td style="text-align: right">0.0</td><td style="text-align: right">77.0</td><td style="text-align: right">0.86</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Read in the contents of the CSV file <code>Hydro_Gens.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">hydro_gens =  CSV.read(&quot;MyData/Hydro_Gens.csv&quot;, DataFrame)

name = &quot;Gen Name&quot;
bus_connection = &quot;Bus&quot;
num = &quot;Number&quot;
min_active_power = &quot;Min Stable Level (MW)&quot;
max_active_power = &quot;Max Capacity (MW)&quot;
ramp_up = &quot;Max Ramp Up (MW/min)&quot;
ramp_down = &quot;Max Ramp Down (MW/min)&quot;
min_up = &quot;Min Up Time (h)&quot;
min_down = &quot;Min Down Time (h)&quot;</code></pre><p>Before building the hydro generators, we must also set up the hydro generators&#39; time series. In this example, we assume that each hydro generator has a unique time series, and all of these time series are contained in one file: <code>MyData/Hydro_Time_Series.csv</code>.  Here is a snapshot of this time series CSV file, where the first column contains time stamps, and the remaining columns contain the time series values for each hydro generator:</p><table><tr><th style="text-align: right">Time Stamp</th><th style="text-align: right">Value - Hydro 1</th><th style="text-align: right">Value - Hydro 2</th><th style="text-align: right">Value - Hydro 3</th><th style="text-align: right">...</th></tr><tr><td style="text-align: right">1/1/23 0:00</td><td style="text-align: right">0.325386</td><td style="text-align: right">0.325409</td><td style="text-align: right">0.314454</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">1/1/23 1:00</td><td style="text-align: right">0.325386</td><td style="text-align: right">0.325409</td><td style="text-align: right">0.314454</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">1/1/23 2:00</td><td style="text-align: right">0.325386</td><td style="text-align: right">0.325409</td><td style="text-align: right">0.314454</td><td style="text-align: right">...</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Each time series for its respective hydro generator has an hourly resolution, and is for the year 2023, plus one full day into 2024, for a total of 366 days, and 8784 values per column. Ensure that your time series file is similarly formatted.</p><p>Create a data frame from <code>Hydro_Time_Series.csv</code> and define variables for the aforementioned resolution and time stamps:</p><pre><code class="language-julia hljs">hydro_time_series = CSV.read(&quot;MyData/Hydro_Time_Series.csv&quot;, DataFrame)

resolution = Dates.Hour(1);
timestamps = range(DateTime(&quot;2023-01-01T00:00:00&quot;); step = resolution, length = 8784);</code></pre><p>In the same <code>for</code> loop, we will build the hydro generator components using the <a href="../../model_library/generated_HydroDispatch/#HydroDispatch"><code>HydroDispatch</code></a> constructor and data stored in the <code>hydro_gens</code> dataframe, and build and attach each hydro generator&#39;s time series. In this example, we assume that the <a href="../../model_library/hydro_generation_cost/#HydroGenerationCost"><code>HydroGenerationCost</code></a> has both zero fixed and variable costs.</p><pre><code class="language-julia hljs">for row in eachrow(hydro_gens)
    norm = maximum(hydro_time_series[:, row[num] + 1]) # plus 1 is to skip the timestamp column
    hydro_array = TimeArray(timestamps, (hydro_time_series[:, row[num] + 1] ./ norm) / system_base_mva) # normalize and per-unitize data
    hydro_TS = SingleTimeSeries(;
        name = &quot;max_active_power&quot;,
        data = hydro_array,
        scaling_factor_multiplier = get_max_active_power,
    )
    local hydro = HydroDispatch(;
        name = row[name],
        available = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0,
        reactive_power = 0.0,
        rating = 0.0,
        prime_mover_type = PrimeMovers.HA,
        active_power_limits = (
            min = row[min_active_power] / system_base_mva,
            max = row[max_active_power] / system_base_mva,
        ),
        reactive_power_limits = (min = 0.0, max = 0.0),
        ramp_limits = (up = row[ramp_up], down = row[ramp_down]),
        time_limits = (up = row[min_up], down = row[min_down]),
        base_power = system_base_mva,
        operation_cost = HydroGenerationCost(zero(LinearCurve), 0.0),
    )
    add_component!(sys, hydro)
    add_time_series!(sys, hydro, hydro_TS)
end</code></pre><h2 id="Building-[PowerLoad](@ref)-Components-and-Reading-in-Their-Time-Series"><a class="docs-heading-anchor" href="#Building-[PowerLoad](@ref)-Components-and-Reading-in-Their-Time-Series">Building <a href="../../model_library/generated_PowerLoad/#PowerLoad"><code>PowerLoad</code></a> Components and Reading in Their Time Series</a><a id="Building-[PowerLoad](@ref)-Components-and-Reading-in-Their-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Building-[PowerLoad](@ref)-Components-and-Reading-in-Their-Time-Series" title="Permalink"></a></h2><p>In this example, we assume that all <a href="../../model_library/generated_PowerLoad/#PowerLoad"><code>PowerLoad</code></a> components are sorted into three regions. Each region has one unique time series, and every load in each region is assigned its regions&#39;s respective time series. </p><p>The data needed to build each <a href="../../model_library/generated_PowerLoad/#PowerLoad"><code>PowerLoad</code></a> unit is found in the CSV file <code>Loads.csv</code>, with a row for each load, and columns for the loads&#39; input parameters. The following table is a snapshot of the first 3 rows of our <code>Loads.csv</code>:</p><table><tr><th style="text-align: right">Load Number</th><th style="text-align: right">Bus</th><th style="text-align: right">Region</th><th style="text-align: right">Participation Factor</th></tr><tr><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">1</td><td style="text-align: right">0.047168669</td></tr><tr><td style="text-align: right">2</td><td style="text-align: right">2</td><td style="text-align: right">1</td><td style="text-align: right">0.0184963</td></tr><tr><td style="text-align: right">3</td><td style="text-align: right">3</td><td style="text-align: right">1</td><td style="text-align: right">0.0360691</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Read in the contents of the CSV file <code>Loads.csv</code> to a data frame and customize the parameter names based on the column names in your CSV file.</p><pre><code class="language-julia hljs">load_params =  CSV.read(&quot;MyData/Loads.csv&quot;, DataFrame)

region = &quot;Region&quot;
bus_connection = &quot;Bus&quot;
factor = &quot;Load Participation Factor&quot;
number = &quot;Load Number&quot;</code></pre><p>Before building the loads, we must also set up the loads&#39; time series. In this example, we assume that each load region has a unique time series, and all of these time series are contained in one file: <code>MyData/Load_Time_Series.csv</code>. Here is a snapshot of this time series CSV file, where the first column contains time stamps, and the remaining columns contain the time series values for each region:</p><table><tr><th style="text-align: right">Time Stamp</th><th style="text-align: right">Value - Region 1</th><th style="text-align: right">Value - Region 2</th><th style="text-align: right">Value - Region 3</th></tr><tr><td style="text-align: right">1/1/23 0:00</td><td style="text-align: right">5465.7296</td><td style="text-align: right">1904.4448</td><td style="text-align: right">2486.38409</td></tr><tr><td style="text-align: right">1/1/23 1:00</td><td style="text-align: right">4994.53821</td><td style="text-align: right">1726.22134</td><td style="text-align: right">2273.63274</td></tr><tr><td style="text-align: right">1/1/23 2:00</td><td style="text-align: right">4825.94679</td><td style="text-align: right">1694.14112</td><td style="text-align: right">2256.41587</td></tr><tr><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td><td style="text-align: right">...</td></tr></table><p>Each time series for its respective load region has an hourly resolution, and is for the year 2023, plus one full day into 2024, for a total of 366 days, and 8784 values per column. Ensure that your time series file is similarly formatted.</p><p>Create a data frame from <code>Load_Time_Series.csv</code> and define variables for the aforementioned resolution and time stamps:</p><pre><code class="language-julia hljs">load_time_series = CSV.read(&quot;MyData/Load_Time_Series.csv&quot;, DataFrame)

resolution = Dates.Hour(1);
timestamps = range(DateTime(&quot;2023-01-01T00:00:00&quot;); step = resolution, length = 8784);</code></pre><p>Construct and attach the loads to the system using the <a href="../../model_library/generated_PowerLoad/#PowerLoad"><code>PowerLoad</code></a> constructor according to their regions.  Because these loads are defined by region, the <code>max_active_power</code> of each load will depend on the maximum time series value of its region, according to the mathematical relationship seen in the code block below.</p><pre><code class="language-julia hljs">for row in eachrow(load_params)
    num = row[number]
    max = maximum(load_time_series[:, row[region] + 1]) # plus 1 in order to skip time stamp column
    load = PowerLoad(;
        name = &quot;load$num&quot;,
        available = true,
        bus = get_bus(sys, row[bus_connection]),
        active_power = 0.0, #per-unitized by device base_power
        reactive_power = 0.0, #per-unitized by device base_power
        base_power = system_base_mva,
        max_active_power = (max) * (row[factor]) / system_base_mva,
        max_reactive_power = 0.0,
    )
    add_component!(sys, load)
end</code></pre><p>In a <code>for</code> loop, iterate over the number of regions in your [<code>System</code>], and use the <a href="../../api/public/#PowerSystems.begin_time_series_update-Tuple{Function, System}"><code>begin_time_series_update()</code></a> function to create and attach the respective loads&#39; time series to every load in a region at once.</p><pre><code class="language-julia hljs">for i in 1:num_regions
    local load_array = TimeArray(timestamps, (load_time_series[:, i+1] ./ maximum(load_time_series[:, i+1])))
    local load_TS = SingleTimeSeries(;
        name = &quot;max_active_power&quot;,
        data = load_array,
        scaling_factor_multiplier = get_max_active_power,
    )
    region = get_component(Area, sys, &quot;R$i&quot;)
    begin_time_series_update(sys) do
        for component in get_components_in_aggregation_topology(PowerLoad, sys, region)
            add_time_series!(sys, component, load_TS)
        end 
    end
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../migrating_to_psy4/">« ...migrate from version 3.0 to 4.0</a><a class="docs-footer-nextpage" href="../../explanation/system/">System »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Thursday 20 February 2025 20:06">Thursday 20 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
